<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>QgsVectorLayerDiagramProvider class | QGIS API Documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark+documentation.compiled.css" />
  <link rel="icon" href="favicon-dark.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="index.html" id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">QGIS API Documentation</a>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="pages.html">Pages</a></li>
            <li><a href="modules.html">Modules</a></li>
            <li><a href="namespaces.html">Namespaces</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="4">
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="files.html">Files</a></li>
            <li><a href="https://github.com/QGIS/QGIS">GitHub</a></li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          QgsVectorLayerDiagramProvider <span class="m-thin">class</span>
        </h1>
        <p>The <a href="classQgsVectorLayerDiagramProvider.html" class="m-doc">QgsVectorLayerDiagramProvider</a> class implements support for diagrams within the labeling engine.</p>
        <div class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li>
              Reference
              <ul>
                <li><a href="#base-classes">Base classes</a></li>
                <li><a href="#typeless-methods">Constructors, destructors, conversion operators</a></li>
                <li><a href="#pub-methods">Public functions</a></li>
                <li><a href="#pro-methods">Protected functions</a></li>
                <li><a href="#pro-attribs">Protected variables</a></li>
              </ul>
            </li>
          </ul>
        </div>
<p>Parameters for the diagrams are taken from the layer settings.</p><aside class="m-note m-info"><h4>Note</h4><p>this class is not a part of public API yet. See notes in <a href="classQgsLabelingEngine.html" class="m-doc">QgsLabelingEngine</a></p><p>not available in Python bindings</p></aside><aside class="m-note m-default"><h4>Since</h4><p>QGIS 2.12</p></aside>
        <section id="base-classes">
          <h2><a href="#base-classes">Base classes</a></h2>
          <dl class="m-doc">
            <dt>
              class <a href="classQgsAbstractLabelProvider.html" class="m-doc">QgsAbstractLabelProvider</a>
            </dt>
            <dd>The <a href="classQgsAbstractLabelProvider.html" class="m-doc">QgsAbstractLabelProvider</a> class is an interface class.</dd>
          </dl>
        </section>
        <section id="typeless-methods">
          <h2><a href="#typeless-methods">Constructors, destructors, conversion operators</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper"><a href="#aa7747af84acb834900303fd75c2cf627" class="m-doc-self" name="aa7747af84acb834900303fd75c2cf627">QgsVectorLayerDiagramProvider</a>(</span><span class="m-doc-wrap"><a href="classQgsVectorLayer.html" class="m-doc">QgsVectorLayer</a>* layer,
              bool ownFeatureLoop = true) <span class="m-label m-flat m-info">explicit</span> </span>
            </dt>
            <dd>Convenience constructor to initialize the provider from given vector layer.</dd>
            <dt>
              <span class="m-doc-wrap-bumper"><a href="#a9582842f1216f3af39413a695af919c8" class="m-doc-self" name="a9582842f1216f3af39413a695af919c8">~QgsVectorLayerDiagramProvider</a>(</span><span class="m-doc-wrap">) <span class="m-label m-flat m-warning">override</span></span>
            </dt>
            <dd>Clean up.</dd>
          </dl>
        </section>
        <section id="pub-methods">
          <h2><a href="#pub-methods">Public functions</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#aab78246041d06f3d9bfcc694d129498e" class="m-doc-self" name="aab78246041d06f3d9bfcc694d129498e">drawLabel</a>(</span><span class="m-doc-wrap"><a href="classQgsRenderContext.html" class="m-doc">QgsRenderContext</a>&amp; context,
              <a href="classpal_1_1LabelPosition.html" class="m-doc">pal::<wbr />LabelPosition</a>* label) const <span class="m-label m-flat m-warning">override</span></span>
            </dt>
            <dd>draw this label at the position determined by the labeling engine</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a408fc40432b8f44c506eae1d6aa5168e" class="m-doc-self" name="a408fc40432b8f44c506eae1d6aa5168e">labelFeatures</a>(</span><span class="m-doc-wrap"><a href="classQgsRenderContext.html" class="m-doc">QgsRenderContext</a>&amp; context) -&gt; QList&lt;<a href="classQgsLabelFeature.html" class="m-doc">QgsLabelFeature</a>*&gt; <span class="m-label m-flat m-warning">override</span></span>
            </dt>
            <dd>Returns list of label features (they are owned by the provider and thus deleted on its destruction)</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a69b2f938a33337cc82197e02066e2fa3" class="m-doc">prepare</a>(</span><span class="m-doc-wrap">const <a href="classQgsRenderContext.html" class="m-doc">QgsRenderContext</a>&amp; context,
              QSet&lt;QString&gt;&amp; attributeNames) -&gt; bool <span class="m-label m-flat m-warning">virtual</span></span>
            </dt>
            <dd>Prepare for registration of features.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a7fc633fd09be45976cf0e38de94418c7" class="m-doc">registerFeature</a>(</span><span class="m-doc-wrap"><a href="classQgsFeature.html" class="m-doc">QgsFeature</a>&amp; feature,
              <a href="classQgsRenderContext.html" class="m-doc">QgsRenderContext</a>&amp; context,
              const <a href="classQgsGeometry.html" class="m-doc">QgsGeometry</a>&amp; obstacleGeometry = <a href="classQgsGeometry.html" class="m-doc">QgsGeometry</a>()) <span class="m-label m-flat m-warning">virtual</span></span>
            </dt>
            <dd>Register a feature for labeling as one or more <a href="classQgsLabelFeature.html" class="m-doc">QgsLabelFeature</a> objects stored into mFeatures.</dd>
          </dl>
        </section>
        <section id="pro-methods">
          <h2><a href="#pro-methods">Protected functions</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a47fe25abb0601428bdfdfdd0d7f2c162" class="m-doc-self" name="a47fe25abb0601428bdfdfdd0d7f2c162">init</a>(</span><span class="m-doc-wrap">)</span>
            </dt>
            <dd>initialization method - called from constructors</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a1dea11851d5887302e1d2c1c2cc303ae" class="m-doc-self" name="a1dea11851d5887302e1d2c1c2cc303ae">registerDiagram</a>(</span><span class="m-doc-wrap"><a href="classQgsFeature.html" class="m-doc">QgsFeature</a>&amp; feat,
              <a href="classQgsRenderContext.html" class="m-doc">QgsRenderContext</a>&amp; context,
              const <a href="classQgsGeometry.html" class="m-doc">QgsGeometry</a>&amp; obstacleGeometry = <a href="classQgsGeometry.html" class="m-doc">QgsGeometry</a>()) -&gt; <a href="classQgsLabelFeature.html" class="m-doc">QgsLabelFeature</a>*</span>
            </dt>
            <dd>helper method to register one diagram feature</dd>
          </dl>
        </section>
        <section id="pro-attribs">
          <h2><a href="#pro-attribs">Protected variables</a></h2>
          <dl class="m-doc">
            <dt>
              <a href="classQgsDiagramRenderer.html" class="m-doc">QgsDiagramRenderer</a>* <a href="#a9b58f9045e4e0ac4179cd56ef29695ea" class="m-doc-self" name="a9b58f9045e4e0ac4179cd56ef29695ea">mDiagRenderer</a>
            </dt>
            <dd>Diagram renderer instance (owned by mSettings)</dd>
            <dt>
              QList&lt;<a href="classQgsLabelFeature.html" class="m-doc">QgsLabelFeature</a>*&gt; <a href="#a9c977bc3196eb0dc45ed9231602c0f9f" class="m-doc-self" name="a9c977bc3196eb0dc45ed9231602c0f9f">mFeatures</a>
            </dt>
            <dd>List of generated label features (owned by the provider)</dd>
            <dt>
              <a href="classQgsFields.html" class="m-doc">QgsFields</a> <a href="#aba94243db7f74c2719994849a459d6ea" class="m-doc-self" name="aba94243db7f74c2719994849a459d6ea">mFields</a>
            </dt>
            <dd>Layer&#x27;s fields.</dd>
            <dt>
              <a href="classQgsCoordinateReferenceSystem.html" class="m-doc">QgsCoordinateReferenceSystem</a> <a href="#a605c3f2ac3ab98acea40fdfcfc0aecb2" class="m-doc-self" name="a605c3f2ac3ab98acea40fdfcfc0aecb2">mLayerCrs</a>
            </dt>
            <dd>Layer&#x27;s CRS.</dd>
            <dt>
              bool <a href="#a4fcbf0091495adbe30a7aad0d615cc76" class="m-doc-self" name="a4fcbf0091495adbe30a7aad0d615cc76">mOwnsSource</a>
            </dt>
            <dd>Whether layer&#x27;s feature source is owned.</dd>
            <dt>
              <a href="classQgsDiagramLayerSettings.html" class="m-doc">QgsDiagramLayerSettings</a> <a href="#a0c900df09176d16626618de5593bf721" class="m-doc-self" name="a0c900df09176d16626618de5593bf721">mSettings</a>
            </dt>
            <dd>Diagram layer settings.</dd>
            <dt>
              <a href="classQgsAbstractFeatureSource.html" class="m-doc">QgsAbstractFeatureSource</a>* <a href="#a31e3a47f1f2a863082e5a652c2059722" class="m-doc-self" name="a31e3a47f1f2a863082e5a652c2059722">mSource</a>
            </dt>
            <dd>Layer&#x27;s feature source.</dd>
          </dl>
        </section>
        <section>
          <h2>Function documentation</h2>
          <section class="m-doc-details" id="a69b2f938a33337cc82197e02066e2fa3"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool QgsVectorLayerDiagramProvider::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a69b2f938a33337cc82197e02066e2fa3" class="m-doc-self">prepare</a>(</span><span class="m-doc-wrap">const <a href="classQgsRenderContext.html" class="m-doc">QgsRenderContext</a>&amp; context,
              QSet&lt;QString&gt;&amp; attributeNames) <span class="m-label m-warning">virtual</span></span></span>
            </h3>
            <p>Prepare for registration of features.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">context</td>
                  <td>render context.</td>
                </tr>
                <tr>
                  <td>attributeNames</td>
                  <td>list of attribute names to which additional required attributes shall be added</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>Whether the preparation was successful - if not, the provider shall not be used</td>
                </tr>
              </tfoot>
            </table>
<p>Must be called after provider has been added to engine (uses its map settings)</p>
          </div></section>
          <section class="m-doc-details" id="a7fc633fd09be45976cf0e38de94418c7"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void QgsVectorLayerDiagramProvider::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a7fc633fd09be45976cf0e38de94418c7" class="m-doc-self">registerFeature</a>(</span><span class="m-doc-wrap"><a href="classQgsFeature.html" class="m-doc">QgsFeature</a>&amp; feature,
              <a href="classQgsRenderContext.html" class="m-doc">QgsRenderContext</a>&amp; context,
              const <a href="classQgsGeometry.html" class="m-doc">QgsGeometry</a>&amp; obstacleGeometry = <a href="classQgsGeometry.html" class="m-doc">QgsGeometry</a>()) <span class="m-label m-warning">virtual</span></span></span>
            </h3>
            <p>Register a feature for labeling as one or more <a href="classQgsLabelFeature.html" class="m-doc">QgsLabelFeature</a> objects stored into mFeatures.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">feature</td>
                  <td>feature for diagram</td>
                </tr>
                <tr>
                  <td>context</td>
                  <td>render context. The <a href="classQgsExpressionContext.html" class="m-doc">QgsExpressionContext</a> contained within the render context must have already had the feature and fields sets prior to calling this method.</td>
                </tr>
                <tr>
                  <td>obstacleGeometry</td>
                  <td>optional obstacle geometry, if a different geometry to the feature&#x27;s geometry should be used as an obstacle for labels (e.g., if the feature has been rendered with an offset point symbol, the obstacle geometry should represent the bounds of the offset symbol). If not set, the feature&#x27;s original geometry will be used as an obstacle for labels. Ownership of obstacleGeometry is transferred.</td>
                </tr>
              </tbody>
            </table>
          </div></section>
        </section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>

          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search.js"></script>
<script src="searchdata.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>QGIS API Documentation. Created by <a href="https://doxygen.org/">Doxygen</a> 1.8.13 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
