<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>QgsLabelingEngine class | QGIS API Documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark+documentation.compiled.css" />
  <link rel="icon" href="favicon-dark.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="index.html" id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">QGIS API Documentation</a>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="pages.html">Pages</a></li>
            <li><a href="modules.html">Modules</a></li>
            <li><a href="namespaces.html">Namespaces</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="4">
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="files.html">Files</a></li>
            <li><a href="https://github.com/QGIS/QGIS">GitHub</a></li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          QgsLabelingEngine <span class="m-thin">class</span>
        </h1>
        <p>The <a href="classQgsLabelingEngine.html" class="m-doc">QgsLabelingEngine</a> class provides map labeling functionality.</p>
        <div class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li>
              Reference
              <ul>
                <li><a href="#typeless-methods">Constructors, destructors, conversion operators</a></li>
                <li><a href="#pub-methods">Public functions</a></li>
                <li><a href="#pro-attribs">Protected variables</a></li>
              </ul>
            </li>
          </ul>
        </div>
<p>The input for the engine is a list of label provider objects and map settings. Based on the input, the engine computes layout of labels for the given map view with no collisions between the labels. Drawing of resulting labels is done again by label providers.</p><p>The labeling engine is used for the map rendering in <a href="classQgsMapRendererJob.html" class="m-doc">QgsMapRendererJob</a> instances, individual map layer renderers may add label providers - for example, <a href="classQgsVectorLayerRenderer.html" class="m-doc">QgsVectorLayerRenderer</a> may add text label provider and diagram provider (if labeling / diagrams were configured for such vector layer).</p><p>The labeling engine may also be used independently from map rendering loop:</p><pre class="m-code"><span class="n">QgsLabelingEngine</span> <span class="n">engine</span><span class="p">;</span>
<span class="n">engine</span><span class="p">.</span><span class="n">setMapSettings</span><span class="p">(</span> <span class="n">mapSettings</span> <span class="p">);</span>
<span class="c1">// add one or more providers</span>
<span class="n">engine</span><span class="p">.</span><span class="n">addProvider</span><span class="p">(</span> <span class="p">...</span> <span class="p">);</span>
<span class="c1">// compute the labeling and draw labels (using painter from the context)</span>
<span class="n">engine</span><span class="p">.</span><span class="n">run</span><span class="p">(</span> <span class="n">context</span> <span class="p">);</span></pre><aside class="m-note m-info"><h4>Note</h4><p>this class is not a part of public API yet. The provider&#x27;s interface still uses <a href="classpal_1_1LabelPosition.html" class="m-doc">pal::<wbr />LabelPosition</a> as an argument in drawLabels() method - this should be sorted out first (a class common to API and pal?). Also, the API may need more polishing to be easy to use - e.g. use concept of labeling layers in API (equivalent of <a href="classpal_1_1Layer.html" class="m-doc">pal::<wbr />Layer</a>) instead of subProviders(), label providers integrated into feature loop vs providers with independent feature loop), split labeling computation from drawing of labels, improved results class with label iterator).</p><p>not available in Python bindings</p></aside><aside class="m-note m-default"><h4>Since</h4><p>QGIS 2.12</p></aside>
        <section id="typeless-methods">
          <h2><a href="#typeless-methods">Constructors, destructors, conversion operators</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper"><a href="#aedf2cef8a9de7d1ff739244e4169a5f4" class="m-doc-self" name="aedf2cef8a9de7d1ff739244e4169a5f4">QgsLabelingEngine</a>(</span><span class="m-doc-wrap">)</span>
            </dt>
            <dd>Construct the labeling engine with default settings.</dd>
            <dt>
              <span class="m-doc-wrap-bumper"><a href="#af61ec8348931219da884b19931ceacc3" class="m-doc-self" name="af61ec8348931219da884b19931ceacc3">QgsLabelingEngine</a>(</span><span class="m-doc-wrap">const <a href="classQgsLabelingEngine.html" class="m-doc">QgsLabelingEngine</a>&amp; rh) <span class="m-label m-flat m-danger">deleted</span></span>
            </dt>
            <dd><a href="classQgsLabelingEngine.html" class="m-doc">QgsLabelingEngine</a> cannot be copied.</dd>
            <dt>
              <span class="m-doc-wrap-bumper"><a href="#afcf34f7f1d42ee8dca120ea0d180b779" class="m-doc-self" name="afcf34f7f1d42ee8dca120ea0d180b779">~QgsLabelingEngine</a>(</span><span class="m-doc-wrap">)</span>
            </dt>
            <dd>Clean up everything (especially the registered providers)</dd>
          </dl>
        </section>
        <section id="pub-methods">
          <h2><a href="#pub-methods">Public functions</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#ab1314e07d96a488aa6887234b5dcd827" class="m-doc-self" name="ab1314e07d96a488aa6887234b5dcd827">addProvider</a>(</span><span class="m-doc-wrap"><a href="classQgsAbstractLabelProvider.html" class="m-doc">QgsAbstractLabelProvider</a>* provider)</span>
            </dt>
            <dd>Add provider of label features. Takes ownership of the provider.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a0106131ab1f5dfeffde7389b46463cf8" class="m-doc-self" name="a0106131ab1f5dfeffde7389b46463cf8">engineSettings</a>(</span><span class="m-doc-wrap">) const -&gt; const <a href="classQgsLabelingEngineSettings.html" class="m-doc">QgsLabelingEngineSettings</a>&amp;</span>
            </dt>
            <dd>Gets associated labeling engine settings.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a433b07e0c0290d0255dc91a1f677d092" class="m-doc-self" name="a433b07e0c0290d0255dc91a1f677d092">mapSettings</a>(</span><span class="m-doc-wrap">) const -&gt; const <a href="classQgsMapSettings.html" class="m-doc">QgsMapSettings</a>&amp;</span>
            </dt>
            <dd>Gets associated map settings.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a51438f63c5038aa3d4f1432516e6de59" class="m-doc-self" name="a51438f63c5038aa3d4f1432516e6de59">operator=</a>(</span><span class="m-doc-wrap">const <a href="classQgsLabelingEngine.html" class="m-doc">QgsLabelingEngine</a>&amp; rh) -&gt; <a href="classQgsLabelingEngine.html" class="m-doc">QgsLabelingEngine</a>&amp; <span class="m-label m-flat m-danger">deleted</span></span>
            </dt>
            <dd><a href="classQgsLabelingEngine.html" class="m-doc">QgsLabelingEngine</a> cannot be copied.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#afe6f58ce53e334dd3943f435d1fd9a41" class="m-doc">participatingLayers</a>(</span><span class="m-doc-wrap">) const -&gt; QList&lt;<a href="classQgsMapLayer.html" class="m-doc">QgsMapLayer</a>*&gt;</span>
            </dt>
            <dd>Returns a list of layers with providers in the engine.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#af2f188751493c4155aa0a215f0372f7a" class="m-doc-self" name="af2f188751493c4155aa0a215f0372f7a">removeProvider</a>(</span><span class="m-doc-wrap"><a href="classQgsAbstractLabelProvider.html" class="m-doc">QgsAbstractLabelProvider</a>* provider)</span>
            </dt>
            <dd>Remove provider if the provider&#x27;s initialization failed. Provider instance is deleted.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#aa50924ee8703a38656ced0f855850bd9" class="m-doc-self" name="aa50924ee8703a38656ced0f855850bd9">results</a>(</span><span class="m-doc-wrap">) const -&gt; <a href="classQgsLabelingResults.html" class="m-doc">QgsLabelingResults</a>*</span>
            </dt>
            <dd>For internal use by the providers.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a2599c890466f3c33586faa42df57aa56" class="m-doc-self" name="a2599c890466f3c33586faa42df57aa56">run</a>(</span><span class="m-doc-wrap"><a href="classQgsRenderContext.html" class="m-doc">QgsRenderContext</a>&amp; context)</span>
            </dt>
            <dd>compute the labeling with given map settings and providers</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a8610cb58fde34969e87a1f34201201e2" class="m-doc-self" name="a8610cb58fde34969e87a1f34201201e2">setMapSettings</a>(</span><span class="m-doc-wrap">const <a href="classQgsMapSettings.html" class="m-doc">QgsMapSettings</a>&amp; mapSettings)</span>
            </dt>
            <dd>Associate map settings instance.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a5902d313fce69ef5b5f64df5b5ab9f26" class="m-doc-self" name="a5902d313fce69ef5b5f64df5b5ab9f26">takeResults</a>(</span><span class="m-doc-wrap">) -&gt; <a href="classQgsLabelingResults.html" class="m-doc">QgsLabelingResults</a>*</span>
            </dt>
            <dd>Returns pointer to recently computed results and pass the ownership of results to the caller.</dd>
          </dl>
        </section>
        <section id="pro-attribs">
          <h2><a href="#pro-attribs">Protected variables</a></h2>
          <dl class="m-doc">
            <dt>
              <a href="classQgsMapSettings.html" class="m-doc">QgsMapSettings</a> <a href="#a0b1d41a769d6e73405703f264a7a1071" class="m-doc-self" name="a0b1d41a769d6e73405703f264a7a1071">mMapSettings</a>
            </dt>
            <dd>Associated map settings instance.</dd>
            <dt>
              QList&lt;<a href="classQgsAbstractLabelProvider.html" class="m-doc">QgsAbstractLabelProvider</a>*&gt; <a href="#af6c5a5fc52eccdf59cb08f55fbb0cd21" class="m-doc-self" name="af6c5a5fc52eccdf59cb08f55fbb0cd21">mProviders</a>
            </dt>
            <dd>List of providers (the are owned by the labeling engine)</dd>
            <dt>
              std::unique_ptr&lt;<a href="classQgsLabelingResults.html" class="m-doc">QgsLabelingResults</a>&gt; <a href="#a058b1f7b080f24a5e3b08053e1b98a35" class="m-doc-self" name="a058b1f7b080f24a5e3b08053e1b98a35">mResults</a>
            </dt>
            <dd>Resulting labeling layout.</dd>
          </dl>
        </section>
        <section>
          <h2>Function documentation</h2>
          <section class="m-doc-details" id="afe6f58ce53e334dd3943f435d1fd9a41"><div>
            <h3>
              <span class="m-doc-wrap-bumper">QList&lt;<a href="classQgsMapLayer.html" class="m-doc">QgsMapLayer</a>*&gt; QgsLabelingEngine::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#afe6f58ce53e334dd3943f435d1fd9a41" class="m-doc-self">participatingLayers</a>(</span><span class="m-doc-wrap">) const</span></span>
            </h3>
            <p>Returns a list of layers with providers in the engine.</p>
<aside class="m-note m-default"><h4>Since</h4><p>QGIS 3.0</p></aside>
          </div></section>
        </section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>

          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search.js"></script>
<script src="searchdata.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>QGIS API Documentation. Created by <a href="https://doxygen.org/">Doxygen</a> 1.8.13 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
