<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>QgsVectorLayerLabelProvider class | QGIS API Documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark+documentation.compiled.css" />
  <link rel="icon" href="favicon-dark.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="index.html" id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">QGIS API Documentation</a>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="pages.html">Pages</a></li>
            <li><a href="modules.html">Modules</a></li>
            <li><a href="namespaces.html">Namespaces</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="4">
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="files.html">Files</a></li>
            <li><a href="https://github.com/QGIS/QGIS">GitHub</a></li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          QgsVectorLayerLabelProvider <span class="m-thin">class</span>
        </h1>
        <p>The <a href="classQgsVectorLayerLabelProvider.html" class="m-doc">QgsVectorLayerLabelProvider</a> class implements a label provider for vector layers.</p>
        <div class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li>
              Reference
              <ul>
                <li><a href="#base-classes">Base classes</a></li>
                <li><a href="#derived-classes">Derived classes</a></li>
                <li><a href="#pub-static-methods">Public static functions</a></li>
                <li><a href="#typeless-methods">Constructors, destructors, conversion operators</a></li>
                <li><a href="#pub-methods">Public functions</a></li>
                <li><a href="#pro-methods">Protected functions</a></li>
                <li><a href="#pro-attribs">Protected variables</a></li>
              </ul>
            </li>
          </ul>
        </div>
<p>Parameters for the labeling are taken from the layer&#x27;s custom properties or from the given settings.</p><aside class="m-note m-info"><h4>Note</h4><p>this class is not a part of public API yet. See notes in <a href="classQgsLabelingEngine.html" class="m-doc">QgsLabelingEngine</a></p><p>not available in Python bindings</p></aside><aside class="m-note m-default"><h4>Since</h4><p>QGIS 2.12</p></aside>
        <section id="base-classes">
          <h2><a href="#base-classes">Base classes</a></h2>
          <dl class="m-doc">
            <dt>
              class <a href="classQgsAbstractLabelProvider.html" class="m-doc">QgsAbstractLabelProvider</a>
            </dt>
            <dd>The <a href="classQgsAbstractLabelProvider.html" class="m-doc">QgsAbstractLabelProvider</a> class is an interface class.</dd>
          </dl>
        </section>
        <section id="derived-classes">
          <h2><a href="#derived-classes">Derived classes</a></h2>
          <dl class="m-doc">
            <dt>
              class <a href="classQgsDxfLabelProvider.html" class="m-doc">QgsDxfLabelProvider</a>
            </dt>
            <dd>Implements a derived label provider internally used for DXF export.</dd>
            <dt>
              class <a href="classQgsRuleBasedLabelProvider.html" class="m-doc">QgsRuleBasedLabelProvider</a>
            </dt>
            <dd></dd>
          </dl>
        </section>
        <section id="pub-static-methods">
          <h2><a href="#pub-static-methods">Public static functions</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">static auto <a href="#a69a99bd2ae1c02f8059c97340a2d90cf" class="m-doc">getPointObstacleGeometry</a>(</span><span class="m-doc-wrap"><a href="classQgsFeature.html" class="m-doc">QgsFeature</a>&amp; fet,
              <a href="classQgsRenderContext.html" class="m-doc">QgsRenderContext</a>&amp; context,
              const <a href="qgsrenderer_8h.html#a9e5c0f5f88a8fd455ad8ef92c3e96f1f" class="m-doc">QgsSymbolList</a>&amp; symbols) -&gt; <a href="classQgsGeometry.html" class="m-doc">QgsGeometry</a></span>
            </dt>
            <dd>Returns the geometry for a point feature which should be used as an obstacle for labels.</dd>
          </dl>
        </section>
        <section id="typeless-methods">
          <h2><a href="#typeless-methods">Constructors, destructors, conversion operators</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper"><a href="#a3dac33c49ad39c2845366239428e41f9" class="m-doc-self" name="a3dac33c49ad39c2845366239428e41f9">QgsVectorLayerLabelProvider</a>(</span><span class="m-doc-wrap"><a href="classQgsVectorLayer.html" class="m-doc">QgsVectorLayer</a>* layer,
              const QString&amp; providerId,
              bool withFeatureLoop,
              const <a href="classQgsPalLayerSettings.html" class="m-doc">QgsPalLayerSettings</a>* settings,
              const QString&amp; layerName = QString()) <span class="m-label m-flat m-info">explicit</span> </span>
            </dt>
            <dd>Convenience constructor to initialize the provider from given vector layer.</dd>
          </dl>
        </section>
        <section id="pub-methods">
          <h2><a href="#pub-methods">Public functions</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#af31a2c4075e6e6f88db51a2879b0a9ee" class="m-doc-self" name="af31a2c4075e6e6f88db51a2879b0a9ee">drawLabel</a>(</span><span class="m-doc-wrap"><a href="classQgsRenderContext.html" class="m-doc">QgsRenderContext</a>&amp; context,
              <a href="classpal_1_1LabelPosition.html" class="m-doc">pal::<wbr />LabelPosition</a>* label) const <span class="m-label m-flat m-warning">override</span></span>
            </dt>
            <dd>draw this label at the position determined by the labeling engine</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#aae965721fabea8a04d0c7c85c01d1381" class="m-doc-self" name="aae965721fabea8a04d0c7c85c01d1381">labelFeatures</a>(</span><span class="m-doc-wrap"><a href="classQgsRenderContext.html" class="m-doc">QgsRenderContext</a>&amp; context) -&gt; QList&lt;<a href="classQgsLabelFeature.html" class="m-doc">QgsLabelFeature</a>*&gt; <span class="m-label m-flat m-warning">override</span></span>
            </dt>
            <dd>Returns list of label features (they are owned by the provider and thus deleted on its destruction)</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a08ab8ec73898d590815dbe6ccc46534c" class="m-doc">prepare</a>(</span><span class="m-doc-wrap">const <a href="classQgsRenderContext.html" class="m-doc">QgsRenderContext</a>&amp; context,
              QSet&lt;QString&gt;&amp; attributeNames) -&gt; bool <span class="m-label m-flat m-warning">virtual</span></span>
            </dt>
            <dd>Prepare for registration of features.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a79ebddb6720f193723e3d68454743c79" class="m-doc">registerFeature</a>(</span><span class="m-doc-wrap"><a href="classQgsFeature.html" class="m-doc">QgsFeature</a>&amp; feature,
              <a href="classQgsRenderContext.html" class="m-doc">QgsRenderContext</a>&amp; context,
              const <a href="classQgsGeometry.html" class="m-doc">QgsGeometry</a>&amp; obstacleGeometry = <a href="classQgsGeometry.html" class="m-doc">QgsGeometry</a>()) <span class="m-label m-flat m-warning">virtual</span></span>
            </dt>
            <dd>Register a feature for labeling as one or more <a href="classQgsLabelFeature.html" class="m-doc">QgsLabelFeature</a> objects stored into mLabels.</dd>
          </dl>
        </section>
        <section id="pro-methods">
          <h2><a href="#pro-methods">Protected functions</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a12630a0f64a24f39294f88edc52b783f" class="m-doc-self" name="a12630a0f64a24f39294f88edc52b783f">drawLabelPrivate</a>(</span><span class="m-doc-wrap"><a href="classpal_1_1LabelPosition.html" class="m-doc">pal::<wbr />LabelPosition</a>* label,
              <a href="classQgsRenderContext.html" class="m-doc">QgsRenderContext</a>&amp; context,
              <a href="classQgsPalLayerSettings.html" class="m-doc">QgsPalLayerSettings</a>&amp; tmpLyr,
              <a href="classQgsTextRenderer.html#a3ab71a69abcc3d5359ed8b4a7ecf16a4" class="m-doc">QgsTextRenderer::<wbr />TextPart</a> drawType,
              double dpiRatio = 1.0) const</span>
            </dt>
            <dd>Internal label drawing method.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#acb4b13bd332669d389bea7c3c4a099bf" class="m-doc-self" name="acb4b13bd332669d389bea7c3c4a099bf">init</a>(</span><span class="m-doc-wrap">)</span>
            </dt>
            <dd>initialization method - called from constructors</dd>
          </dl>
        </section>
        <section id="pro-attribs">
          <h2><a href="#pro-attribs">Protected variables</a></h2>
          <dl class="m-doc">
            <dt>
              <a href="classQgsCoordinateReferenceSystem.html" class="m-doc">QgsCoordinateReferenceSystem</a> <a href="#a0bcdef3edd155ac71ff84691a3083a92" class="m-doc-self" name="a0bcdef3edd155ac71ff84691a3083a92">mCrs</a>
            </dt>
            <dd>Layer&#x27;s CRS.</dd>
            <dt>
              <a href="classQgsFields.html" class="m-doc">QgsFields</a> <a href="#a2ba5c0cf0eacecfd03f3a9e0af1acaf6" class="m-doc-self" name="a2ba5c0cf0eacecfd03f3a9e0af1acaf6">mFields</a>
            </dt>
            <dd>Layer&#x27;s fields.</dd>
            <dt>
              QList&lt;<a href="classQgsLabelFeature.html" class="m-doc">QgsLabelFeature</a>*&gt; <a href="#a39b502276e079050aabca909761884d0" class="m-doc-self" name="a39b502276e079050aabca909761884d0">mLabels</a>
            </dt>
            <dd>List of generated.</dd>
            <dt>
              <a href="classQgsWkbTypes.html#a60e72c2f73cb07fdbcdbc2d5068b5d9c" class="m-doc">QgsWkbTypes::<wbr />GeometryType</a> <a href="#a6bace3c1d4dc0d574ad249d1b0c90cd2" class="m-doc-self" name="a6bace3c1d4dc0d574ad249d1b0c90cd2">mLayerGeometryType</a>
            </dt>
            <dd>Geometry type of layer.</dd>
            <dt>
              bool <a href="#afc580a243d57ee0da777d4aeb886fe5f" class="m-doc-self" name="afc580a243d57ee0da777d4aeb886fe5f">mOwnsSource</a>
            </dt>
            <dd>Whether layer&#x27;s feature source is owned.</dd>
            <dt>
              <a href="classQgsPalLayerSettings.html" class="m-doc">QgsPalLayerSettings</a> <a href="#a6c16abd6e9423428ef53837aa335d893" class="m-doc-self" name="a6c16abd6e9423428ef53837aa335d893">mSettings</a>
            </dt>
            <dd>Layer&#x27;s labeling configuration.</dd>
            <dt>
              <a href="classQgsAbstractFeatureSource.html" class="m-doc">QgsAbstractFeatureSource</a>* <a href="#a85592506c134602c474f5714458d7a69" class="m-doc-self" name="a85592506c134602c474f5714458d7a69">mSource</a>
            </dt>
            <dd>Layer&#x27;s feature source.</dd>
          </dl>
        </section>
        <section>
          <h2>Function documentation</h2>
          <section class="m-doc-details" id="a69a99bd2ae1c02f8059c97340a2d90cf"><div>
            <h3>
              <span class="m-doc-wrap-bumper">static <a href="classQgsGeometry.html" class="m-doc">QgsGeometry</a> QgsVectorLayerLabelProvider::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a69a99bd2ae1c02f8059c97340a2d90cf" class="m-doc-self">getPointObstacleGeometry</a>(</span><span class="m-doc-wrap"><a href="classQgsFeature.html" class="m-doc">QgsFeature</a>&amp; fet,
              <a href="classQgsRenderContext.html" class="m-doc">QgsRenderContext</a>&amp; context,
              const <a href="qgsrenderer_8h.html#a9e5c0f5f88a8fd455ad8ef92c3e96f1f" class="m-doc">QgsSymbolList</a>&amp; symbols)</span></span>
            </h3>
            <p>Returns the geometry for a point feature which should be used as an obstacle for labels.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">fet</td>
                  <td>point feature</td>
                </tr>
                <tr>
                  <td>context</td>
                  <td>render context</td>
                </tr>
                <tr>
                  <td>symbols</td>
                  <td>symbols rendered for point feature</td>
                </tr>
              </tbody>
            </table>
<p>This obstacle geometry will respect the dimensions and offsets of the symbol used to render the point, and ensures that labels will not overlap large or offset points.</p><aside class="m-note m-default"><h4>Since</h4><p>QGIS 2.14</p></aside>
          </div></section>
          <section class="m-doc-details" id="a08ab8ec73898d590815dbe6ccc46534c"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool QgsVectorLayerLabelProvider::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a08ab8ec73898d590815dbe6ccc46534c" class="m-doc-self">prepare</a>(</span><span class="m-doc-wrap">const <a href="classQgsRenderContext.html" class="m-doc">QgsRenderContext</a>&amp; context,
              QSet&lt;QString&gt;&amp; attributeNames) <span class="m-label m-warning">virtual</span></span></span>
            </h3>
            <p>Prepare for registration of features.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">context</td>
                  <td>render context.</td>
                </tr>
                <tr>
                  <td>attributeNames</td>
                  <td>list of attribute names to which additional required attributes shall be added</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td>Whether the preparation was successful - if not, the provider shall not be used</td>
                </tr>
              </tfoot>
            </table>
<p>Must be called after provider has been added to engine (uses its map settings)</p>
          </div></section>
          <section class="m-doc-details" id="a79ebddb6720f193723e3d68454743c79"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void QgsVectorLayerLabelProvider::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a79ebddb6720f193723e3d68454743c79" class="m-doc-self">registerFeature</a>(</span><span class="m-doc-wrap"><a href="classQgsFeature.html" class="m-doc">QgsFeature</a>&amp; feature,
              <a href="classQgsRenderContext.html" class="m-doc">QgsRenderContext</a>&amp; context,
              const <a href="classQgsGeometry.html" class="m-doc">QgsGeometry</a>&amp; obstacleGeometry = <a href="classQgsGeometry.html" class="m-doc">QgsGeometry</a>()) <span class="m-label m-warning">virtual</span></span></span>
            </h3>
            <p>Register a feature for labeling as one or more <a href="classQgsLabelFeature.html" class="m-doc">QgsLabelFeature</a> objects stored into mLabels.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">feature</td>
                  <td>feature to label</td>
                </tr>
                <tr>
                  <td>context</td>
                  <td>render context. The <a href="classQgsExpressionContext.html" class="m-doc">QgsExpressionContext</a> contained within the render context must have already had the feature and fields sets prior to calling this method.</td>
                </tr>
                <tr>
                  <td>obstacleGeometry</td>
                  <td>optional obstacle geometry, if a different geometry to the feature&#x27;s geometry should be used as an obstacle for labels (e.g., if the feature has been rendered with an offset point symbol, the obstacle geometry should represent the bounds of the offset symbol). If not set, the feature&#x27;s original geometry will be used as an obstacle for labels.</td>
                </tr>
              </tbody>
            </table>
          </div></section>
        </section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>

          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search.js"></script>
<script src="searchdata.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>QGIS API Documentation. Created by <a href="https://doxygen.org/">Doxygen</a> 1.8.13 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
