<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>QgsLayerTreeModel class | QGIS API Documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark+documentation.compiled.css" />
  <link rel="icon" href="favicon-dark.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="index.html" id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">QGIS API Documentation</a>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="pages.html">Pages</a></li>
            <li><a href="modules.html">Modules</a></li>
            <li><a href="namespaces.html">Namespaces</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="4">
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="files.html">Files</a></li>
            <li><a href="https://github.com/QGIS/QGIS">GitHub</a></li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          QgsLayerTreeModel <span class="m-thin">class</span>
        </h1>
        <p>The <a href="classQgsLayerTreeModel.html" class="m-doc">QgsLayerTreeModel</a> class is model implementation for Qt item views framework.</p>
        <div class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li>
              Reference
              <ul>
                <li><a href="#derived-classes">Derived classes</a></li>
                <li><a href="#pub-types">Public types</a></li>
                <li><a href="#pub-static-methods">Public static functions</a></li>
                <li><a href="#typeless-methods">Constructors, destructors, conversion operators</a></li>
                <li><a href="#pub-methods">Public functions</a></li>
                <li><a href="#pro-types">Protected types</a></li>
                <li><a href="#pro-methods">Protected functions</a></li>
                <li><a href="#pro-slots">Protected slots</a></li>
                <li><a href="#pro-attribs">Protected variables</a></li>
              </ul>
            </li>
          </ul>
        </div>
<p>The model can be used in any QTreeView, it is however recommended to use it with <a href="classQgsLayerTreeView.html" class="m-doc">QgsLayerTreeView</a> which brings additional functionality specific to layer tree handling.</p><p>The model listens to the changes in the layer tree and signals the changes as appropriate, so that any view that uses the model is updated accordingly.</p><p>Behavior of the model can be customized with flags. For example, whether to show legend or whether to allow changes to the layer tree.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="classQgsLayerTreeView.html" class="m-doc">QgsLayerTreeView</a></p></aside><aside class="m-note m-default"><h4>Since</h4><p>QGIS 2.4</p></aside>
        <section id="derived-classes">
          <h2><a href="#derived-classes">Derived classes</a></h2>
          <dl class="m-doc">
            <dt>
              class <a href="classQgsLegendModel.html" class="m-doc">QgsLegendModel</a>
            </dt>
            <dd>Item model implementation based on layer tree model for layout legend.</dd>
          </dl>
        </section>
        <section id="pub-types">
          <h2><a href="#pub-types">Public types</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">enum <a href="#afa5f075d2c17117c6fecef990ff3dbe8" class="m-doc">Flag</a> { </span><span class="m-doc-wrap"><a href="#afa5f075d2c17117c6fecef990ff3dbe8a3aff637104414db77d4ceb54db3f8ee0" class="m-doc">ShowLegend</a> = 0x0001,
              <a href="#afa5f075d2c17117c6fecef990ff3dbe8a25d080d7d329e01e0b99aa1e299d6f1e" class="m-doc">ShowLegendAsTree</a> = 0x0004,
              <a href="#afa5f075d2c17117c6fecef990ff3dbe8a6cd11c232df94b1c8ca1411fdc2242c5" class="m-doc">DeferredLegendInvalidation</a> = 0x0008,
              <a href="#afa5f075d2c17117c6fecef990ff3dbe8ab7cd7daa3dac8b9ecdeb8960e348527d" class="m-doc">UseEmbeddedWidgets</a> = 0x0010,
              <a href="#afa5f075d2c17117c6fecef990ff3dbe8a32c3dd5417486d98037068d194a768d2" class="m-doc">AllowNodeReorder</a> = 0x1000,
              <a href="#afa5f075d2c17117c6fecef990ff3dbe8aa24ea86df2945792c1a9ae671b73218d" class="m-doc">AllowNodeRename</a> = 0x2000,
              <a href="#afa5f075d2c17117c6fecef990ff3dbe8a154c74db1374949de799fd9a0422c070" class="m-doc">AllowNodeChangeVisibility</a> = 0x4000,
              <a href="#afa5f075d2c17117c6fecef990ff3dbe8aa626628f11400c5e4a1f9a2c2a1e473d" class="m-doc">AllowLegendChangeState</a> = 0x8000,
              <a href="#afa5f075d2c17117c6fecef990ff3dbe8a0c7e6c7e11ff269ebb57a508113870d0" class="m-doc">ActionHierarchical</a> = 0x10000 }</span>
            </dt>
            <dd></dd>
          </dl>
        </section>
        <section id="pub-static-methods">
          <h2><a href="#pub-static-methods">Public static functions</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">static auto <a href="#ad6fad38140e733f7c699160e777f4fb5" class="m-doc">index2legendNode</a>(</span><span class="m-doc-wrap">const QModelIndex&amp; index) -&gt; <a href="classQgsLayerTreeModelLegendNode.html" class="m-doc">QgsLayerTreeModelLegendNode</a>*</span>
            </dt>
            <dd>Returns legend node for given index.</dd>
          </dl>
        </section>
        <section id="typeless-methods">
          <h2><a href="#typeless-methods">Constructors, destructors, conversion operators</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper"><a href="#a3ed1e6aaa170e73448b88228c2870cc3" class="m-doc">QgsLayerTreeModel</a>(</span><span class="m-doc-wrap"><a href="classQgsLayerTree.html" class="m-doc">QgsLayerTree</a>* rootNode,
              QObject* parent = nullptr) <span class="m-label m-flat m-info">explicit</span> </span>
            </dt>
            <dd>Construct a new tree model with given layer tree (root node must not be null pointer).</dd>
          </dl>
        </section>
        <section id="pub-methods">
          <h2><a href="#pub-methods">Public functions</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a15010177a229e583cfddc5ca8aac0c35" class="m-doc-self" name="a15010177a229e583cfddc5ca8aac0c35">autoCollapseLegendNodes</a>(</span><span class="m-doc-wrap">) const -&gt; int</span>
            </dt>
            <dd>Returns at what number of legend nodes the layer node should be collapsed. -1 means no auto-collapse (default).</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a608b2884c69ab4c42326290c91eac815" class="m-doc-self" name="a608b2884c69ab4c42326290c91eac815">currentIndex</a>(</span><span class="m-doc-wrap">) const -&gt; QModelIndex</span>
            </dt>
            <dd>Gets index of the item marked as current. Item marked as current is underlined.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#affc331ff7049e742c605b33069b6469a" class="m-doc">findLegendNode</a>(</span><span class="m-doc-wrap">const QString&amp; layerId,
              const QString&amp; ruleKey) const -&gt; <a href="classQgsLayerTreeModelLegendNode.html" class="m-doc">QgsLayerTreeModelLegendNode</a>*</span>
            </dt>
            <dd>Searches through the layer tree to find a legend node with a matching layer ID and rule key.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a0b747df53d3883d43f63301dad7dc04f" class="m-doc-self" name="a0b747df53d3883d43f63301dad7dc04f">flags</a>(</span><span class="m-doc-wrap">) const -&gt; Flags</span>
            </dt>
            <dd>Returns OR-ed combination of model flags.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a95e27550d139ece4871f2bcf35ea68da" class="m-doc">index2node</a>(</span><span class="m-doc-wrap">const QModelIndex&amp; index) const -&gt; <a href="classQgsLayerTreeNode.html" class="m-doc">QgsLayerTreeNode</a>*</span>
            </dt>
            <dd>Returns layer tree node for given index.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#ab4a871cb44ba1742461d411e0fd5adf8" class="m-doc">indexes2nodes</a>(</span><span class="m-doc-wrap">const QModelIndexList&amp; list,
              bool skipInternal = false) const -&gt; QList&lt;<a href="classQgsLayerTreeNode.html" class="m-doc">QgsLayerTreeNode</a>*&gt;</span>
            </dt>
            <dd>Convert a <em>list</em> of indexes to a list of layer tree nodes.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a0cdf799edb85773e073f7b5f73a63e82" class="m-doc">layerLegendNodes</a>(</span><span class="m-doc-wrap"><a href="classQgsLayerTreeLayer.html" class="m-doc">QgsLayerTreeLayer</a>* nodeLayer,
              bool skipNodeEmbeddedInParent = false) -&gt; QList&lt;<a href="classQgsLayerTreeModelLegendNode.html" class="m-doc">QgsLayerTreeModelLegendNode</a>*&gt;</span>
            </dt>
            <dd>Returns filtered list of active legend nodes attached to a particular layer node (by default it returns also legend node embedded in parent layer node (if any) unless skipNodeEmbeddedInParent is true)</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#ac10ce0512adc3ec2a8dacde919ea529f" class="m-doc">layerOriginalLegendNodes</a>(</span><span class="m-doc-wrap"><a href="classQgsLayerTreeLayer.html" class="m-doc">QgsLayerTreeLayer</a>* nodeLayer) -&gt; QList&lt;<a href="classQgsLayerTreeModelLegendNode.html" class="m-doc">QgsLayerTreeModelLegendNode</a>*&gt;</span>
            </dt>
            <dd>Returns original (unfiltered) list of legend nodes attached to a particular layer node.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#ac86cc6ce1169e8cd543136ea47023f1d" class="m-doc">layerStyleOverrides</a>(</span><span class="m-doc-wrap">) const -&gt; QMap&lt;QString, QString&gt;</span>
            </dt>
            <dd>Gets map of map layer style overrides (key: layer ID, value: style name) where a different style should be used instead of the current one.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#ae57b5fa908a79930dcb8f654d7e63945" class="m-doc-self" name="ae57b5fa908a79930dcb8f654d7e63945">layerTreeNodeFont</a>(</span><span class="m-doc-wrap">int nodeType) const -&gt; QFont</span>
            </dt>
            <dd>Gets font for a particular type of layer tree node. nodeType should come from <a href="classQgsLayerTreeNode.html#a2a159ed7a5a428acd53fb226234cda17" class="m-doc">QgsLayerTreeNode::<wbr />NodeType</a> enumeration.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a19b9eee4250a226b72dbb55377dab13a" class="m-doc">legendFilterByScale</a>(</span><span class="m-doc-wrap">) const -&gt; double</span>
            </dt>
            <dd>Returns the scale which restricts the legend nodes which are visible.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a7be58023df7b1bd8ec604c523baaaa47" class="m-doc">legendFilterMapSettings</a>(</span><span class="m-doc-wrap">) const -&gt; const <a href="classQgsMapSettings.html" class="m-doc">QgsMapSettings</a>*</span>
            </dt>
            <dd>Returns the current map settings used for the current legend filter (or null if none is enabled)</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a603d5f38a2a23e5a925ed6541708a223" class="m-doc">legendMapViewData</a>(</span><span class="m-doc-wrap">double* mapUnitsPerPixel,
              int* dpi,
              double* scale) const</span>
            </dt>
            <dd>Gets hints about map view - to be used in legend nodes.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a219fd9ae4bb4a081fb5f5ab522b182bc" class="m-doc">legendNode2index</a>(</span><span class="m-doc-wrap"><a href="classQgsLayerTreeModelLegendNode.html" class="m-doc">QgsLayerTreeModelLegendNode</a>* legendNode) -&gt; QModelIndex</span>
            </dt>
            <dd>Returns index for a given legend node.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#ab082785bc69d4d12799a564be44bec5d" class="m-doc">legendNodeEmbeddedInParent</a>(</span><span class="m-doc-wrap"><a href="classQgsLayerTreeLayer.html" class="m-doc">QgsLayerTreeLayer</a>* nodeLayer) const -&gt; <a href="classQgsLayerTreeModelLegendNode.html" class="m-doc">QgsLayerTreeModelLegendNode</a>*</span>
            </dt>
            <dd>Returns legend node that may be embedded in parent (i.e.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a0a5252e51c940365d8cc18b82e4421ce" class="m-doc-self" name="a0a5252e51c940365d8cc18b82e4421ce">node2index</a>(</span><span class="m-doc-wrap"><a href="classQgsLayerTreeNode.html" class="m-doc">QgsLayerTreeNode</a>* node) const -&gt; QModelIndex</span>
            </dt>
            <dd>Returns index for a given node. If the node does not belong to the layer tree, the result is undefined.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#aeb87ff7eca65f425e451e684c1d009fb" class="m-doc">refreshLayerLegend</a>(</span><span class="m-doc-wrap"><a href="classQgsLayerTreeLayer.html" class="m-doc">QgsLayerTreeLayer</a>* nodeLayer)</span>
            </dt>
            <dd>Force a refresh of legend nodes of a layer node.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a884e38dfb1a075809b64f45081d38f17" class="m-doc-self" name="a884e38dfb1a075809b64f45081d38f17">rootGroup</a>(</span><span class="m-doc-wrap">) const -&gt; <a href="classQgsLayerTree.html" class="m-doc">QgsLayerTree</a>*</span>
            </dt>
            <dd>Returns pointer to the root node of the layer tree. Always a non-null pointer.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a5ec2670395922c337632c50098351245" class="m-doc-self" name="a5ec2670395922c337632c50098351245">setAutoCollapseLegendNodes</a>(</span><span class="m-doc-wrap">int nodeCount)</span>
            </dt>
            <dd>Sets at what number of legend nodes the layer node should be collapsed. Setting -1 disables the auto-collapse (default).</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a6da566fba16f1a1be23cf9795ba19b6c" class="m-doc-self" name="a6da566fba16f1a1be23cf9795ba19b6c">setCurrentIndex</a>(</span><span class="m-doc-wrap">const QModelIndex&amp; currentIndex)</span>
            </dt>
            <dd>Sets index of the current item. May be used by view. Item marked as current is underlined.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a4c4760b9af6b613b79167670d525db21" class="m-doc-self" name="a4c4760b9af6b613b79167670d525db21">setFlag</a>(</span><span class="m-doc-wrap"><a href="classQgsLayerTreeModel.html#afa5f075d2c17117c6fecef990ff3dbe8" class="m-doc">Flag</a> f,
              bool on = true)</span>
            </dt>
            <dd>Enable or disable a model flag.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a8644bf1332a1686db50a039d7e6ff5fc" class="m-doc-self" name="a8644bf1332a1686db50a039d7e6ff5fc">setFlags</a>(</span><span class="m-doc-wrap">QgsLayerTreeModel::Flags f)</span>
            </dt>
            <dd>Sets OR-ed combination of model flags.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#acf7bceb345b7e95d90208aa751acfe80" class="m-doc">setLayerStyleOverrides</a>(</span><span class="m-doc-wrap">const QMap&lt;QString, QString&gt;&amp; overrides)</span>
            </dt>
            <dd>Sets map of map layer style overrides (key: layer ID, value: style name) where a different style should be used instead of the current one.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a51e612dd4b4ee4117c27709be948d164" class="m-doc-self" name="a51e612dd4b4ee4117c27709be948d164">setLayerTreeNodeFont</a>(</span><span class="m-doc-wrap">int nodeType,
              const QFont&amp; font)</span>
            </dt>
            <dd>Sets font for a particular type of layer tree node. nodeType should come from <a href="classQgsLayerTreeNode.html#a2a159ed7a5a428acd53fb226234cda17" class="m-doc">QgsLayerTreeNode::<wbr />NodeType</a> enumeration.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#afe9f6d842619e048ee5ab9b431a30ab7" class="m-doc">setLegendFilter</a>(</span><span class="m-doc-wrap">const <a href="classQgsMapSettings.html" class="m-doc">QgsMapSettings</a>* settings,
              bool useExtent = true,
              const <a href="classQgsGeometry.html" class="m-doc">QgsGeometry</a>&amp; polygon = <a href="classQgsGeometry.html" class="m-doc">QgsGeometry</a>(),
              bool useExpressions = true)</span>
            </dt>
            <dd>Filter display of legend nodes for given map settings.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a217e168da9cbd68791226b6e9587256d" class="m-doc">setLegendFilterByMap</a>(</span><span class="m-doc-wrap">const <a href="classQgsMapSettings.html" class="m-doc">QgsMapSettings</a>* settings)</span>
            </dt>
            <dd>Force only display of legend nodes which are valid for given map settings.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a296c0f1b7ef5ba02d69fe4f89fa32de5" class="m-doc">setLegendFilterByScale</a>(</span><span class="m-doc-wrap">double scale)</span>
            </dt>
            <dd>Force only display of legend nodes which are valid for a given <em>scale</em>.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a3d717bafc9f29cf76a837b2090c4b346" class="m-doc">setLegendMapViewData</a>(</span><span class="m-doc-wrap">double mapUnitsPerPixel,
              int dpi,
              double scale)</span>
            </dt>
            <dd>Give the layer tree model hints about the currently associated map view so that legend nodes that use map units can be scaled currectly.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a1eea04a4a4f8fd9c87e7de5fa1684fcb" class="m-doc">setRootGroup</a>(</span><span class="m-doc-wrap"><a href="classQgsLayerTree.html" class="m-doc">QgsLayerTree</a>* newRootGroup)</span>
            </dt>
            <dd>Reset the model and use a new root group node.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#af498b2aaa8553bfae9eeb1f17507db55" class="m-doc-self" name="af498b2aaa8553bfae9eeb1f17507db55">testFlag</a>(</span><span class="m-doc-wrap"><a href="classQgsLayerTreeModel.html#afa5f075d2c17117c6fecef990ff3dbe8" class="m-doc">Flag</a> f) const -&gt; bool</span>
            </dt>
            <dd>Check whether a flag is enabled.</dd>
          </dl>
        </section>
        <section id="pro-types">
          <h2><a href="#pro-types">Protected types</a></h2>
          <dl class="m-doc">
            <dt>
              struct <a href="structQgsLayerTreeModel_1_1LayerLegendData.html" class="m-doc">LayerLegendData</a>
            </dt>
            <dd>Structure that stores all data associated with one map layer.</dd>
            <dt>
              struct <a href="structQgsLayerTreeModel_1_1LayerLegendTree.html" class="m-doc">LayerLegendTree</a>
            </dt>
            <dd>Structure that stores tree representation of map layer&#x27;s legend.</dd>
          </dl>
        </section>
        <section id="pro-methods">
          <h2><a href="#pro-methods">Protected functions</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a29093b7e3acb8f3a31b9366bf362dd0a" class="m-doc-self" name="a29093b7e3acb8f3a31b9366bf362dd0a">filterLegendNodes</a>(</span><span class="m-doc-wrap">const QList&lt;<a href="classQgsLayerTreeModelLegendNode.html" class="m-doc">QgsLayerTreeModelLegendNode</a>*&gt;&amp; nodes) -&gt; QList&lt;<a href="classQgsLayerTreeModelLegendNode.html" class="m-doc">QgsLayerTreeModelLegendNode</a>*&gt;</span>
            </dt>
            <dd>Filter nodes from <a href="classQgsMapLayerLegend.html" class="m-doc">QgsMapLayerLegend</a> according to the current filtering rules.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a656ece4025338c6be0efb7c598d00ed3" class="m-doc-self" name="a656ece4025338c6be0efb7c598d00ed3">recursivelyEmitDataChanged</a>(</span><span class="m-doc-wrap">const QModelIndex&amp; index = QModelIndex())</span>
            </dt>
            <dd>emit dataChanged() for layer tree node items</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#aabf79071907395075b9a539ba585f574" class="m-doc">refreshScaleBasedLayers</a>(</span><span class="m-doc-wrap">const QModelIndex&amp; index = QModelIndex())</span>
            </dt>
            <dd>Updates layer data for scale dependent layers, should be called when map scale changes.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a8b0fcc3e5a2f5abb3a43d51b34db0f56" class="m-doc">tryBuildLegendTree</a>(</span><span class="m-doc-wrap">const QList&lt;<a href="classQgsLayerTreeModelLegendNode.html" class="m-doc">QgsLayerTreeModelLegendNode</a>*&gt;&amp; nodes) -&gt; <a href="structQgsLayerTreeModel_1_1LayerLegendTree.html" class="m-doc">LayerLegendTree</a>*</span>
            </dt>
            <dd></dd>
          </dl>
        </section>
        <section id="pro-slots">
          <h2><a href="#pro-slots">Protected slots</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a76a0cf0994aa872fa58d36f6038674c7" class="m-doc">nodeNameChanged</a>(</span><span class="m-doc-wrap"><a href="classQgsLayerTreeNode.html" class="m-doc">QgsLayerTreeNode</a>* node,
              const QString&amp; name)</span>
            </dt>
            <dd>Updates model when node&#x27;s name has changed.</dd>
          </dl>
        </section>
        <section id="pro-attribs">
          <h2><a href="#pro-attribs">Protected variables</a></h2>
          <dl class="m-doc">
            <dt>
              int <a href="#ac54ec8a70bfed6d3cfdd2d20701a1c1b" class="m-doc-self" name="ac54ec8a70bfed6d3cfdd2d20701a1c1b">mAutoCollapseLegendNodesCount</a>
            </dt>
            <dd>Minimal number of nodes when legend should be automatically collapsed. -1 = disabled.</dd>
            <dt>
              QPersistentModelIndex <a href="#a7dacf93ce56589e84d12c3af4e31e895" class="m-doc-self" name="a7dacf93ce56589e84d12c3af4e31e895">mCurrentIndex</a>
            </dt>
            <dd>Current index - will be underlined.</dd>
            <dt>
              Flags <a href="#afd4f503bed47aa3cf58588cef05c0981" class="m-doc-self" name="afd4f503bed47aa3cf58588cef05c0981">mFlags</a>
            </dt>
            <dd>Sets of flags for the model.</dd>
            <dt>
              QMap&lt;QString, QString&gt; <a href="#adc14f6e50c6cb20ce07b49d12fc8cdba" class="m-doc">mLayerStyleOverrides</a>
            </dt>
            <dd>Overrides of map layers&#x27; styles: key = layer ID, value = style XML.</dd>
            <dt>
              QMap&lt;<a href="classQgsLayerTreeLayer.html" class="m-doc">QgsLayerTreeLayer</a>*, <a href="structQgsLayerTreeModel_1_1LayerLegendData.html" class="m-doc">LayerLegendData</a>&gt; <a href="#a91b6e236789838f7f4745c917f186541" class="m-doc-self" name="a91b6e236789838f7f4745c917f186541">mLegend</a>
            </dt>
            <dd>Per layer data about layer&#x27;s legend nodes.</dd>
            <dt>
              double <a href="#a0c2fe980a4ff00a8b94a800f7eac42ae" class="m-doc-self" name="a0c2fe980a4ff00a8b94a800f7eac42ae">mLegendFilterByScale</a>
            </dt>
            <dd>scale denominator for filtering of legend nodes (&lt;= 0 means no filtering)</dd>
            <dt>
              bool <a href="#a4b6ae342654f1e745be03126e4c4404e" class="m-doc-self" name="a4b6ae342654f1e745be03126e4c4404e">mLegendFilterUsesExtent</a>
            </dt>
            <dd>whether to use map filtering</dd>
            <dt>
              <a href="classQgsLayerTree.html" class="m-doc">QgsLayerTree</a>* <a href="#a973e88b46b9c9ac6594e4900f6e4eac8" class="m-doc-self" name="a973e88b46b9c9ac6594e4900f6e4eac8">mRootNode</a>
            </dt>
            <dd>Pointer to the root node of the layer tree. Not owned by the model.</dd>
          </dl>
        </section>
        <section>
          <h2>Enum documentation</h2>
          <section class="m-doc-details" id="afa5f075d2c17117c6fecef990ff3dbe8"><div>
            <h3>
              enum QgsLayerTreeModel::<wbr /><a href="#afa5f075d2c17117c6fecef990ff3dbe8" class="m-doc-self">Flag</a>
            </h3>
            <table class="m-table m-fullwidth m-flat m-doc">
              <thead><tr><th style="width: 1%">Enumerators</th><th></th></tr></thead>
              <tbody>
                <tr>
                  <td><a href="#afa5f075d2c17117c6fecef990ff3dbe8a3aff637104414db77d4ceb54db3f8ee0" class="m-doc-self" name="afa5f075d2c17117c6fecef990ff3dbe8a3aff637104414db77d4ceb54db3f8ee0">ShowLegend</a></td>
                  <td>
                  <p>Add legend nodes for layer nodes.</p>
                  </td>
                </tr>
                <tr>
                  <td><a href="#afa5f075d2c17117c6fecef990ff3dbe8a25d080d7d329e01e0b99aa1e299d6f1e" class="m-doc-self" name="afa5f075d2c17117c6fecef990ff3dbe8a25d080d7d329e01e0b99aa1e299d6f1e">ShowLegendAsTree</a></td>
                  <td>
                  <p>For legends that support it, will show them in a tree instead of a list (needs also ShowLegend). Added in 2.8.</p>
                  </td>
                </tr>
                <tr>
                  <td><a href="#afa5f075d2c17117c6fecef990ff3dbe8a6cd11c232df94b1c8ca1411fdc2242c5" class="m-doc-self" name="afa5f075d2c17117c6fecef990ff3dbe8a6cd11c232df94b1c8ca1411fdc2242c5">DeferredLegendInvalidation</a></td>
                  <td>
                  <p>Defer legend model invalidation.</p>
                  </td>
                </tr>
                <tr>
                  <td><a href="#afa5f075d2c17117c6fecef990ff3dbe8ab7cd7daa3dac8b9ecdeb8960e348527d" class="m-doc-self" name="afa5f075d2c17117c6fecef990ff3dbe8ab7cd7daa3dac8b9ecdeb8960e348527d">UseEmbeddedWidgets</a></td>
                  <td>
                  <p>Layer nodes may optionally include extra embedded widgets (if used in <a href="classQgsLayerTreeView.html" class="m-doc">QgsLayerTreeView</a>). Added in 2.16.</p>
                  </td>
                </tr>
                <tr>
                  <td><a href="#afa5f075d2c17117c6fecef990ff3dbe8a32c3dd5417486d98037068d194a768d2" class="m-doc-self" name="afa5f075d2c17117c6fecef990ff3dbe8a32c3dd5417486d98037068d194a768d2">AllowNodeReorder</a></td>
                  <td>
                  <p>Allow reordering with drag&#x27;n&#x27;drop.</p>
                  </td>
                </tr>
                <tr>
                  <td><a href="#afa5f075d2c17117c6fecef990ff3dbe8aa24ea86df2945792c1a9ae671b73218d" class="m-doc-self" name="afa5f075d2c17117c6fecef990ff3dbe8aa24ea86df2945792c1a9ae671b73218d">AllowNodeRename</a></td>
                  <td>
                  <p>Allow renaming of groups and layers.</p>
                  </td>
                </tr>
                <tr>
                  <td><a href="#afa5f075d2c17117c6fecef990ff3dbe8a154c74db1374949de799fd9a0422c070" class="m-doc-self" name="afa5f075d2c17117c6fecef990ff3dbe8a154c74db1374949de799fd9a0422c070">AllowNodeChangeVisibility</a></td>
                  <td>
                  <p>Allow user to set node visibility with a checkbox.</p>
                  </td>
                </tr>
                <tr>
                  <td><a href="#afa5f075d2c17117c6fecef990ff3dbe8aa626628f11400c5e4a1f9a2c2a1e473d" class="m-doc-self" name="afa5f075d2c17117c6fecef990ff3dbe8aa626628f11400c5e4a1f9a2c2a1e473d">AllowLegendChangeState</a></td>
                  <td>
                  <p>Allow check boxes for legend nodes (if supported by layer&#x27;s legend)</p>
                  </td>
                </tr>
                <tr>
                  <td><a href="#afa5f075d2c17117c6fecef990ff3dbe8a0c7e6c7e11ff269ebb57a508113870d0" class="m-doc-self" name="afa5f075d2c17117c6fecef990ff3dbe8a0c7e6c7e11ff269ebb57a508113870d0">ActionHierarchical</a></td>
                  <td>
                  <p>Check/uncheck action has consequences on children (or parents for leaf node)</p>
                  </td>
                </tr>
              </tbody>
            </table>
          </div></section>
        </section>
        <section>
          <h2>Function documentation</h2>
          <section class="m-doc-details" id="ad6fad38140e733f7c699160e777f4fb5"><div>
            <h3>
              <span class="m-doc-wrap-bumper">static <a href="classQgsLayerTreeModelLegendNode.html" class="m-doc">QgsLayerTreeModelLegendNode</a>* QgsLayerTreeModel::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#ad6fad38140e733f7c699160e777f4fb5" class="m-doc-self">index2legendNode</a>(</span><span class="m-doc-wrap">const QModelIndex&amp; index)</span></span>
            </h3>
            <p>Returns legend node for given index.</p>
<p>Returns null for invalid index</p><aside class="m-note m-default"><h4>Since</h4><p>QGIS 2.6</p></aside>
          </div></section>
          <section class="m-doc-details" id="a3ed1e6aaa170e73448b88228c2870cc3"><div>
            <h3>
              <span class="m-doc-wrap-bumper"> QgsLayerTreeModel::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a3ed1e6aaa170e73448b88228c2870cc3" class="m-doc-self">QgsLayerTreeModel</a>(</span><span class="m-doc-wrap"><a href="classQgsLayerTree.html" class="m-doc">QgsLayerTree</a>* rootNode,
              QObject* parent = nullptr) <span class="m-label m-info">explicit</span> </span></span>
            </h3>
            <p>Construct a new tree model with given layer tree (root node must not be null pointer).</p>
<p>The root node is not transferred by the model.</p>
          </div></section>
          <section class="m-doc-details" id="affc331ff7049e742c605b33069b6469a"><div>
            <h3>
              <span class="m-doc-wrap-bumper"><a href="classQgsLayerTreeModelLegendNode.html" class="m-doc">QgsLayerTreeModelLegendNode</a>* QgsLayerTreeModel::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#affc331ff7049e742c605b33069b6469a" class="m-doc-self">findLegendNode</a>(</span><span class="m-doc-wrap">const QString&amp; layerId,
              const QString&amp; ruleKey) const</span></span>
            </h3>
            <p>Searches through the layer tree to find a legend node with a matching layer ID and rule key.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">layerId</td>
                  <td>map layer ID</td>
                </tr>
                <tr>
                  <td>ruleKey</td>
                  <td>legend node rule key</td>
                </tr>
              </tbody>
              <tfoot>
                <tr>
                  <th>Returns</th>
                  <td><a href="classQgsLayerTreeModelLegendNode.html" class="m-doc">QgsLayerTreeModelLegendNode</a> if found</td>
                </tr>
              </tfoot>
            </table>
<aside class="m-note m-default"><h4>Since</h4><p>QGIS 2.14</p></aside>
          </div></section>
          <section class="m-doc-details" id="a95e27550d139ece4871f2bcf35ea68da"><div>
            <h3>
              <span class="m-doc-wrap-bumper"><a href="classQgsLayerTreeNode.html" class="m-doc">QgsLayerTreeNode</a>* QgsLayerTreeModel::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a95e27550d139ece4871f2bcf35ea68da" class="m-doc-self">index2node</a>(</span><span class="m-doc-wrap">const QModelIndex&amp; index) const</span></span>
            </h3>
            <p>Returns layer tree node for given index.</p>
<p>Returns root node for invalid index. Returns null pointer if index does not refer to a layer tree node (e.g. it is a legend node)</p>
          </div></section>
          <section class="m-doc-details" id="ab4a871cb44ba1742461d411e0fd5adf8"><div>
            <h3>
              <span class="m-doc-wrap-bumper">QList&lt;<a href="classQgsLayerTreeNode.html" class="m-doc">QgsLayerTreeNode</a>*&gt; QgsLayerTreeModel::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#ab4a871cb44ba1742461d411e0fd5adf8" class="m-doc-self">indexes2nodes</a>(</span><span class="m-doc-wrap">const QModelIndexList&amp; list,
              bool skipInternal = false) const</span></span>
            </h3>
            <p>Convert a <em>list</em> of indexes to a list of layer tree nodes.</p>
<p>Indices that do not represent layer tree nodes are skipped. If <em>skipInternal</em> is true, a node is included in the output list only if no parent node is in the list.</p>
          </div></section>
          <section class="m-doc-details" id="a0cdf799edb85773e073f7b5f73a63e82"><div>
            <h3>
              <span class="m-doc-wrap-bumper">QList&lt;<a href="classQgsLayerTreeModelLegendNode.html" class="m-doc">QgsLayerTreeModelLegendNode</a>*&gt; QgsLayerTreeModel::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a0cdf799edb85773e073f7b5f73a63e82" class="m-doc-self">layerLegendNodes</a>(</span><span class="m-doc-wrap"><a href="classQgsLayerTreeLayer.html" class="m-doc">QgsLayerTreeLayer</a>* nodeLayer,
              bool skipNodeEmbeddedInParent = false)</span></span>
            </h3>
            <p>Returns filtered list of active legend nodes attached to a particular layer node (by default it returns also legend node embedded in parent layer node (if any) unless skipNodeEmbeddedInParent is true)</p>
<aside class="m-note m-info"><h4>Note</h4><p>Parameter skipNodeEmbeddedInParent added in QGIS 2.18</p></aside><aside class="m-note m-default"><h4>See also</h4><p><a href="classQgsLayerTreeModel.html#ac10ce0512adc3ec2a8dacde919ea529f" class="m-doc">layerOriginalLegendNodes()</a></p></aside><aside class="m-note m-default"><h4>Since</h4><p>QGIS 2.6</p></aside>
          </div></section>
          <section class="m-doc-details" id="ac10ce0512adc3ec2a8dacde919ea529f"><div>
            <h3>
              <span class="m-doc-wrap-bumper">QList&lt;<a href="classQgsLayerTreeModelLegendNode.html" class="m-doc">QgsLayerTreeModelLegendNode</a>*&gt; QgsLayerTreeModel::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#ac10ce0512adc3ec2a8dacde919ea529f" class="m-doc-self">layerOriginalLegendNodes</a>(</span><span class="m-doc-wrap"><a href="classQgsLayerTreeLayer.html" class="m-doc">QgsLayerTreeLayer</a>* nodeLayer)</span></span>
            </h3>
            <p>Returns original (unfiltered) list of legend nodes attached to a particular layer node.</p>
<aside class="m-note m-default"><h4>See also</h4><p><a href="classQgsLayerTreeModel.html#a0cdf799edb85773e073f7b5f73a63e82" class="m-doc">layerLegendNodes()</a></p></aside><aside class="m-note m-default"><h4>Since</h4><p>QGIS 2.14</p></aside>
          </div></section>
          <section class="m-doc-details" id="ac86cc6ce1169e8cd543136ea47023f1d"><div>
            <h3>
              <span class="m-doc-wrap-bumper">QMap&lt;QString, QString&gt; QgsLayerTreeModel::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#ac86cc6ce1169e8cd543136ea47023f1d" class="m-doc-self">layerStyleOverrides</a>(</span><span class="m-doc-wrap">) const</span></span>
            </h3>
            <p>Gets map of map layer style overrides (key: layer ID, value: style name) where a different style should be used instead of the current one.</p>
<aside class="m-note m-default"><h4>Since</h4><p>QGIS 2.10</p></aside>
          </div></section>
          <section class="m-doc-details" id="a19b9eee4250a226b72dbb55377dab13a"><div>
            <h3>
              <span class="m-doc-wrap-bumper">double QgsLayerTreeModel::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a19b9eee4250a226b72dbb55377dab13a" class="m-doc-self">legendFilterByScale</a>(</span><span class="m-doc-wrap">) const</span></span>
            </h3>
            <p>Returns the scale which restricts the legend nodes which are visible.</p>
<p>The scale value indicates the scale denominator, e.g. 1000.0 for a 1:1000 map. A scale &lt;= 0 indicates that no scale filtering is being performed.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="classQgsLayerTreeModel.html#a296c0f1b7ef5ba02d69fe4f89fa32de5" class="m-doc">setLegendFilterByScale()</a></p></aside><aside class="m-note m-default"><h4>Since</h4><p>QGIS 2.6</p></aside>
          </div></section>
          <section class="m-doc-details" id="a7be58023df7b1bd8ec604c523baaaa47"><div>
            <h3>
              <span class="m-doc-wrap-bumper">const <a href="classQgsMapSettings.html" class="m-doc">QgsMapSettings</a>* QgsLayerTreeModel::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a7be58023df7b1bd8ec604c523baaaa47" class="m-doc-self">legendFilterMapSettings</a>(</span><span class="m-doc-wrap">) const</span></span>
            </h3>
            <p>Returns the current map settings used for the current legend filter (or null if none is enabled)</p>
<aside class="m-note m-default"><h4>Since</h4><p>QGIS 2.14</p></aside>
          </div></section>
          <section class="m-doc-details" id="a603d5f38a2a23e5a925ed6541708a223"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void QgsLayerTreeModel::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a603d5f38a2a23e5a925ed6541708a223" class="m-doc-self">legendMapViewData</a>(</span><span class="m-doc-wrap">double* mapUnitsPerPixel,
              int* dpi,
              double* scale) const</span></span>
            </h3>
            <p>Gets hints about map view - to be used in legend nodes.</p>
<p>Arguments that are not null will receive values. If there are no valid map view data (from previous call to <a href="classQgsLayerTreeModel.html#a3d717bafc9f29cf76a837b2090c4b346" class="m-doc">setLegendMapViewData()</a>), returned values are zeros.</p><aside class="m-note m-default"><h4>Since</h4><p>QGIS 2.6</p></aside>
          </div></section>
          <section class="m-doc-details" id="a219fd9ae4bb4a081fb5f5ab522b182bc"><div>
            <h3>
              <span class="m-doc-wrap-bumper">QModelIndex QgsLayerTreeModel::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a219fd9ae4bb4a081fb5f5ab522b182bc" class="m-doc-self">legendNode2index</a>(</span><span class="m-doc-wrap"><a href="classQgsLayerTreeModelLegendNode.html" class="m-doc">QgsLayerTreeModelLegendNode</a>* legendNode)</span></span>
            </h3>
            <p>Returns index for a given legend node.</p>
<p>If the legend node does not belong to the layer tree, the result is undefined. If the legend node is belongs to the tree but it is filtered out, invalid model index is returned.</p><aside class="m-note m-default"><h4>Since</h4><p>QGIS 2.6</p></aside>
          </div></section>
          <section class="m-doc-details" id="ab082785bc69d4d12799a564be44bec5d"><div>
            <h3>
              <span class="m-doc-wrap-bumper"><a href="classQgsLayerTreeModelLegendNode.html" class="m-doc">QgsLayerTreeModelLegendNode</a>* QgsLayerTreeModel::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#ab082785bc69d4d12799a564be44bec5d" class="m-doc-self">legendNodeEmbeddedInParent</a>(</span><span class="m-doc-wrap"><a href="classQgsLayerTreeLayer.html" class="m-doc">QgsLayerTreeLayer</a>* nodeLayer) const</span></span>
            </h3>
            <p>Returns legend node that may be embedded in parent (i.e.</p>
<p>its icon will be used for layer&#x27;s icon).</p><aside class="m-note m-default"><h4>Since</h4><p>QGIS 2.18</p></aside>
          </div></section>
          <section class="m-doc-details" id="aeb87ff7eca65f425e451e684c1d009fb"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void QgsLayerTreeModel::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#aeb87ff7eca65f425e451e684c1d009fb" class="m-doc-self">refreshLayerLegend</a>(</span><span class="m-doc-wrap"><a href="classQgsLayerTreeLayer.html" class="m-doc">QgsLayerTreeLayer</a>* nodeLayer)</span></span>
            </h3>
            <p>Force a refresh of legend nodes of a layer node.</p>
<p>Not necessary to call when layer&#x27;s renderer is changed as the model listens to these events.</p>
          </div></section>
          <section class="m-doc-details" id="acf7bceb345b7e95d90208aa751acfe80"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void QgsLayerTreeModel::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#acf7bceb345b7e95d90208aa751acfe80" class="m-doc-self">setLayerStyleOverrides</a>(</span><span class="m-doc-wrap">const QMap&lt;QString, QString&gt;&amp; overrides)</span></span>
            </h3>
            <p>Sets map of map layer style overrides (key: layer ID, value: style name) where a different style should be used instead of the current one.</p>
<aside class="m-note m-default"><h4>Since</h4><p>QGIS 2.10</p></aside>
          </div></section>
          <section class="m-doc-details" id="afe9f6d842619e048ee5ab9b431a30ab7"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void QgsLayerTreeModel::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#afe9f6d842619e048ee5ab9b431a30ab7" class="m-doc-self">setLegendFilter</a>(</span><span class="m-doc-wrap">const <a href="classQgsMapSettings.html" class="m-doc">QgsMapSettings</a>* settings,
              bool useExtent = true,
              const <a href="classQgsGeometry.html" class="m-doc">QgsGeometry</a>&amp; polygon = <a href="classQgsGeometry.html" class="m-doc">QgsGeometry</a>(),
              bool useExpressions = true)</span></span>
            </h3>
            <p>Filter display of legend nodes for given map settings.</p>
            <table class="m-table m-fullwidth m-flat">
              <thead>
                <tr><th colspan="2">Parameters</th></tr>
              </thead>
              <tbody>
                <tr>
                  <td style="width: 1%">settings</td>
                  <td>Map settings. Setting a null pointer or invalid settings will disable any filter. Ownership is not changed, a copy is made</td>
                </tr>
                <tr>
                  <td>useExtent</td>
                  <td>Whether to use the extent of the map settings as a first spatial filter on legend nodes</td>
                </tr>
                <tr>
                  <td>polygon</td>
                  <td>If not empty, this polygon will be used instead of the map extent to filter legend nodes</td>
                </tr>
                <tr>
                  <td>useExpressions</td>
                  <td>Whether to use legend node filter expressions</td>
                </tr>
              </tbody>
            </table>
<aside class="m-note m-default"><h4>Since</h4><p>QGIS 2.14</p></aside>
          </div></section>
          <section class="m-doc-details" id="a217e168da9cbd68791226b6e9587256d"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void QgsLayerTreeModel::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a217e168da9cbd68791226b6e9587256d" class="m-doc-self">setLegendFilterByMap</a>(</span><span class="m-doc-wrap">const <a href="classQgsMapSettings.html" class="m-doc">QgsMapSettings</a>* settings)</span></span>
            </h3>
            <p>Force only display of legend nodes which are valid for given map settings.</p>
<p>Setting null pointer or invalid map settings will disable the functionality. Ownership of map settings pointer does not change, a copy is made.</p><aside class="m-note m-default"><h4>Since</h4><p>QGIS 2.6</p></aside>
          </div></section>
          <section class="m-doc-details" id="a296c0f1b7ef5ba02d69fe4f89fa32de5"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void QgsLayerTreeModel::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a296c0f1b7ef5ba02d69fe4f89fa32de5" class="m-doc-self">setLegendFilterByScale</a>(</span><span class="m-doc-wrap">double scale)</span></span>
            </h3>
            <p>Force only display of legend nodes which are valid for a given <em>scale</em>.</p>
<p>The <em>scale</em> value indicates the scale denominator, e.g. 1000.0 for a 1:1000 map. Setting <em>scale</em> &lt;= 0 will disable the functionality.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="classQgsLayerTreeModel.html#a19b9eee4250a226b72dbb55377dab13a" class="m-doc">legendFilterByScale()</a></p></aside><aside class="m-note m-default"><h4>Since</h4><p>QGIS 2.6</p></aside>
          </div></section>
          <section class="m-doc-details" id="a3d717bafc9f29cf76a837b2090c4b346"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void QgsLayerTreeModel::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a3d717bafc9f29cf76a837b2090c4b346" class="m-doc-self">setLegendMapViewData</a>(</span><span class="m-doc-wrap">double mapUnitsPerPixel,
              int dpi,
              double scale)</span></span>
            </h3>
            <p>Give the layer tree model hints about the currently associated map view so that legend nodes that use map units can be scaled currectly.</p>
<aside class="m-note m-default"><h4>Since</h4><p>QGIS 2.6</p></aside>
          </div></section>
          <section class="m-doc-details" id="a1eea04a4a4f8fd9c87e7de5fa1684fcb"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void QgsLayerTreeModel::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a1eea04a4a4f8fd9c87e7de5fa1684fcb" class="m-doc-self">setRootGroup</a>(</span><span class="m-doc-wrap"><a href="classQgsLayerTree.html" class="m-doc">QgsLayerTree</a>* newRootGroup)</span></span>
            </h3>
            <p>Reset the model and use a new root group node.</p>
<aside class="m-note m-default"><h4>Since</h4><p>QGIS 2.6</p></aside>
          </div></section>
          <section class="m-doc-details" id="aabf79071907395075b9a539ba585f574"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void QgsLayerTreeModel::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#aabf79071907395075b9a539ba585f574" class="m-doc-self">refreshScaleBasedLayers</a>(</span><span class="m-doc-wrap">const QModelIndex&amp; index = QModelIndex()) <span class="m-label m-warning">protected</span></span></span>
            </h3>
            <p>Updates layer data for scale dependent layers, should be called when map scale changes.</p>
<p>Emits dataChanged() for all scale dependent layers.</p><aside class="m-note m-default"><h4>Since</h4><p>QGIS 2.16</p></aside>
          </div></section>
          <section class="m-doc-details" id="a8b0fcc3e5a2f5abb3a43d51b34db0f56"><div>
            <h3>
              <span class="m-doc-wrap-bumper"><a href="structQgsLayerTreeModel_1_1LayerLegendTree.html" class="m-doc">LayerLegendTree</a>* QgsLayerTreeModel::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a8b0fcc3e5a2f5abb3a43d51b34db0f56" class="m-doc-self">tryBuildLegendTree</a>(</span><span class="m-doc-wrap">const QList&lt;<a href="classQgsLayerTreeModelLegendNode.html" class="m-doc">QgsLayerTreeModelLegendNode</a>*&gt;&amp; nodes) <span class="m-label m-warning">protected</span></span></span>
            </h3>
<aside class="m-note m-info"><h4>Note</h4><p>not available in Python bindings</p></aside>
          </div></section>
          <section class="m-doc-details" id="a76a0cf0994aa872fa58d36f6038674c7"><div>
            <h3>
              <span class="m-doc-wrap-bumper">void QgsLayerTreeModel::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a76a0cf0994aa872fa58d36f6038674c7" class="m-doc-self">nodeNameChanged</a>(</span><span class="m-doc-wrap"><a href="classQgsLayerTreeNode.html" class="m-doc">QgsLayerTreeNode</a>* node,
              const QString&amp; name) <span class="m-label m-warning">protected slot</span></span></span>
            </h3>
            <p>Updates model when node&#x27;s name has changed.</p>
<aside class="m-note m-default"><h4>Since</h4><p>QGIS 3.0</p></aside>
          </div></section>
        </section>
        <section>
          <h2>Variable documentation</h2>
          <section class="m-doc-details" id="adc14f6e50c6cb20ce07b49d12fc8cdba"><div>
            <h3>
              QMap&lt;QString, QString&gt; QgsLayerTreeModel::<wbr /><a href="#adc14f6e50c6cb20ce07b49d12fc8cdba" class="m-doc-self">mLayerStyleOverrides</a> <span class="m-label m-warning">protected</span>
            </h3>
            <p>Overrides of map layers&#x27; styles: key = layer ID, value = style XML.</p>
<p>This allows showing a legend that is different from the current style of layers</p>
          </div></section>
        </section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>

          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search.js"></script>
<script src="searchdata.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>QGIS API Documentation. Created by <a href="https://doxygen.org/">Doxygen</a> 1.8.13 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
