<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>NormVecDecorator class | QGIS API Documentation</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Source+Sans+Pro:400,400i,600,600i%7CSource+Code+Pro:400,400i,600" />
  <link rel="stylesheet" href="m-dark+documentation.compiled.css" />
  <link rel="icon" href="favicon-dark.png" type="image/png" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="theme-color" content="#22272e" />
</head>
<body>
<header><nav id="navigation">
  <div class="m-container">
    <div class="m-row">
      <a href="index.html" id="m-navbar-brand" class="m-col-t-8 m-col-m-none m-left-m">QGIS API Documentation</a>
      <div class="m-col-t-4 m-hide-m m-text-right m-nopadr">
        <a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
          <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
        </svg></a>
        <a id="m-navbar-show" href="#navigation" title="Show navigation"></a>
        <a id="m-navbar-hide" href="#" title="Hide navigation"></a>
      </div>
      <div id="m-navbar-collapse" class="m-col-t-12 m-show-m m-col-m-none m-right-m">
        <div class="m-row">
          <ol class="m-col-t-6 m-col-m-none">
            <li><a href="pages.html">Pages</a></li>
            <li><a href="modules.html">Modules</a></li>
            <li><a href="namespaces.html">Namespaces</a></li>
          </ol>
          <ol class="m-col-t-6 m-col-m-none" start="4">
            <li><a href="annotated.html">Classes</a></li>
            <li><a href="files.html">Files</a></li>
            <li><a href="https://github.com/QGIS/QGIS">GitHub</a></li>
            <li class="m-show-m"><a href="#search" class="m-doc-search-icon" title="Search" onclick="return showSearch()"><svg style="height: 0.9rem;" viewBox="0 0 16 16">
              <path d="m6 0c-3.3144 0-6 2.6856-6 6 0 3.3144 2.6856 6 6 6 1.4858 0 2.8463-0.54083 3.8945-1.4355-0.0164 0.33797 0.14734 0.75854 0.5 1.1504l3.2227 3.7891c0.55185 0.6139 1.4517 0.66544 2.002 0.11524 0.55022-0.55022 0.49866-1.4501-0.11524-2.002l-3.7891-3.2246c-0.39184-0.35266-0.81242-0.51469-1.1504-0.5 0.89472-1.0482 1.4355-2.4088 1.4355-3.8945 0-3.3128-2.6856-5.998-6-5.998zm0 1.5625a4.4375 4.4375 0 0 1 4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375 4.4375 4.4375 4.4375 0 0 1-4.4375-4.4375 4.4375 4.4375 0 0 1 4.4375-4.4375z"/>
            </svg></a></li>
          </ol>
        </div>
      </div>
    </div>
  </div>
</nav></header>
<main><article>
  <div class="m-container m-container-inflatable">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <h1>
          NormVecDecorator <span class="m-thin">class</span>
        </h1>
        <p>Decorator class which adds the functionality of estimating normals at the data points.</p>
        <div class="m-block m-default">
          <h3>Contents</h3>
          <ul>
            <li>
              Reference
              <ul>
                <li><a href="#base-classes">Base classes</a></li>
                <li><a href="#pub-types">Public types</a></li>
                <li><a href="#pub-methods">Public functions</a></li>
                <li><a href="#pro-methods">Protected functions</a></li>
                <li><a href="#pro-attribs">Protected variables</a></li>
              </ul>
            </li>
          </ul>
        </div>
<aside class="m-note m-info"><h4>Note</h4><p>Not available in Python bindings.</p></aside>
        <section id="base-classes">
          <h2><a href="#base-classes">Base classes</a></h2>
          <dl class="m-doc">
            <dt>
              class <a href="classTriDecorator.html" class="m-doc">TriDecorator</a>
            </dt>
            <dd>Decorator class for Triangulations (s.</dd>
          </dl>
        </section>
        <section id="pub-types">
          <h2><a href="#pub-types">Public types</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">enum <a href="#af5f5f0b4a0975d79af48e06ddbbe7337" class="m-doc-self" name="af5f5f0b4a0975d79af48e06ddbbe7337">PointState</a> { </span><span class="m-doc-wrap"><a href="#af5f5f0b4a0975d79af48e06ddbbe7337acb6173ec1f71200168bb805778b9ee00" class="m-doc">Normal</a>,
              <a href="#af5f5f0b4a0975d79af48e06ddbbe7337a420cd52e08ad918ff1e168c3e692e677" class="m-doc">BreakLine</a>,
              <a href="#af5f5f0b4a0975d79af48e06ddbbe7337a0589ed5785216ec182fa3f4dad6fffcd" class="m-doc">EndPoint</a> }</span>
            </dt>
            <dd>Enumeration for the state of a point. Normal means, that the point is not on a BreakLine, BreakLine means that the point is on a breakline (but not an end point of it) and EndPoint means, that it is an endpoint of a breakline.</dd>
          </dl>
        </section>
        <section id="pub-methods">
          <h2><a href="#pub-methods">Public functions</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#af6c7c88358a1906dddc276a1eb81a152" class="m-doc">addPoint</a>(</span><span class="m-doc-wrap">const <a href="classQgsPoint.html" class="m-doc">QgsPoint</a>&amp; point) -&gt; int <span class="m-label m-flat m-warning">override</span></span>
            </dt>
            <dd>Adds a <em>point</em> to the triangulation.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a571738bc9fef8c46dd0ec48e6bf12c35" class="m-doc-self" name="a571738bc9fef8c46dd0ec48e6bf12c35">calcNormal</a>(</span><span class="m-doc-wrap">double x,
              double y,
              <a href="classVector3D.html" class="m-doc">Vector3D</a>* result) -&gt; bool <span class="m-label m-flat m-warning">override</span></span>
            </dt>
            <dd>Calculates the normal at a point on the surface and assigns it to &#x27;result&#x27;. Returns true in case of success and false in case of failure.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#ab68136a70cf1a4b2c61da9f4c2d0c5e0" class="m-doc-self" name="ab68136a70cf1a4b2c61da9f4c2d0c5e0">calcNormalForPoint</a>(</span><span class="m-doc-wrap">double x,
              double y,
              int point,
              <a href="classVector3D.html" class="m-doc">Vector3D</a>* result) -&gt; bool</span>
            </dt>
            <dd>Calculates the normal of a triangle-point for the point with coordinates x and y. This is needed, if a point is on a break line and there is no unique normal stored in &#x27;mNormVec&#x27;. Returns false, it something went wrong and true otherwise.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a5a51d6b2d83fa689ee6dc8bbebfb6fb7" class="m-doc">calcPoint</a>(</span><span class="m-doc-wrap">double x,
              double y,
              <a href="classQgsPoint.html" class="m-doc">QgsPoint</a>&amp; result) -&gt; bool <span class="m-label m-flat m-warning">override</span></span>
            </dt>
            <dd>Calculates x-, y and z-value of the point on the surface and assigns it to &#x27;result&#x27;.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a590ea619e3aa35db0962237a7d8791fe" class="m-doc-self" name="a590ea619e3aa35db0962237a7d8791fe">eliminateHorizontalTriangles</a>(</span><span class="m-doc-wrap">) <span class="m-label m-flat m-warning">override</span></span>
            </dt>
            <dd>Eliminates the horizontal triangles by swapping or by insertion of new points. If alreadyestimated is true, a re-estimation of the normals will be done.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#adc008e4e2feb2c63505e088260f1e3b4" class="m-doc-self" name="adc008e4e2feb2c63505e088260f1e3b4">estimateFirstDerivative</a>(</span><span class="m-doc-wrap">int pointno) -&gt; bool</span>
            </dt>
            <dd>Estimates the first derivative a point. Return true in case of success and false otherwise.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#adbb6b1fe2b6bab1a929337e359d609f2" class="m-doc-self" name="adbb6b1fe2b6bab1a929337e359d609f2">estimateFirstDerivatives</a>(</span><span class="m-doc-wrap"><a href="classQgsFeedback.html" class="m-doc">QgsFeedback</a>* feedback = nullptr) -&gt; bool</span>
            </dt>
            <dd>This method adds the functionality of estimating normals at the data points. Return true in the case of success and false otherwise.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a3761ed65d8ffc2dc28717f2b10b9c02c" class="m-doc-self" name="a3761ed65d8ffc2dc28717f2b10b9c02c">getNormal</a>(</span><span class="m-doc-wrap">int n) const -&gt; <a href="classVector3D.html" class="m-doc">Vector3D</a>*</span>
            </dt>
            <dd>Returns a pointer to the normal vector for the point with the number n.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#aa923675d1b956893c88721bc62b8526f" class="m-doc-self" name="aa923675d1b956893c88721bc62b8526f">getState</a>(</span><span class="m-doc-wrap">int pointno) const -&gt; <a href="classNormVecDecorator.html#af5f5f0b4a0975d79af48e06ddbbe7337" class="m-doc">PointState</a></span>
            </dt>
            <dd>Returns the state of the point with the number &#x27;pointno&#x27;.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a215d84734a98250ad868959adac59c9d" class="m-doc-self" name="a215d84734a98250ad868959adac59c9d">getTriangle</a>(</span><span class="m-doc-wrap">double x,
              double y,
              <a href="classQgsPoint.html" class="m-doc">QgsPoint</a>&amp; p1,
              <a href="classVector3D.html" class="m-doc">Vector3D</a>* v1,
              <a href="classQgsPoint.html" class="m-doc">QgsPoint</a>&amp; p2,
              <a href="classVector3D.html" class="m-doc">Vector3D</a>* v2,
              <a href="classQgsPoint.html" class="m-doc">QgsPoint</a>&amp; p3,
              <a href="classVector3D.html" class="m-doc">Vector3D</a>* v3) -&gt; bool</span>
            </dt>
            <dd>Finds out, in which triangle a point with coordinates x and y is and assigns the triangle points to p1, p2, p3 and the estimated normals to v1, v2, v3. The vectors are normally taken from &#x27;mNormVec&#x27;, except if p1, p2 or p3 is a point on a breakline. In this case, the normal is calculated on-the-fly. Returns false, if something went wrong and true otherwise.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a2b726d25ae7a828372813f0dead0fadb" class="m-doc-self" name="a2b726d25ae7a828372813f0dead0fadb">getTriangle</a>(</span><span class="m-doc-wrap">double x,
              double y,
              <a href="classQgsPoint.html" class="m-doc">QgsPoint</a>&amp; p1,
              int&amp; ptn1,
              <a href="classVector3D.html" class="m-doc">Vector3D</a>* v1,
              <a href="classNormVecDecorator.html#af5f5f0b4a0975d79af48e06ddbbe7337" class="m-doc">PointState</a>* state1,
              <a href="classQgsPoint.html" class="m-doc">QgsPoint</a>&amp; p2,
              int&amp; ptn2,
              <a href="classVector3D.html" class="m-doc">Vector3D</a>* v2,
              <a href="classNormVecDecorator.html#af5f5f0b4a0975d79af48e06ddbbe7337" class="m-doc">PointState</a>* state2,
              <a href="classQgsPoint.html" class="m-doc">QgsPoint</a>&amp; p3,
              int&amp; ptn3,
              <a href="classVector3D.html" class="m-doc">Vector3D</a>* v3,
              <a href="classNormVecDecorator.html#af5f5f0b4a0975d79af48e06ddbbe7337" class="m-doc">PointState</a>* state3) -&gt; bool</span>
            </dt>
            <dd>This function behaves similar to the one above. Additionally, the numbers of the points are returned (ptn1, ptn2, ptn3) as well as the PointStates of the triangle points (state1, state2, state3)</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a530951628c6a30912667c556690782ed" class="m-doc">saveTriangulation</a>(</span><span class="m-doc-wrap"><a href="classQgsFeatureSink.html" class="m-doc">QgsFeatureSink</a>* sink,
              <a href="classQgsFeedback.html" class="m-doc">QgsFeedback</a>* feedback = nullptr) const -&gt; bool <span class="m-label m-flat m-warning">override</span></span>
            </dt>
            <dd>Saves the triangulation features to a feature <em>sink</em>.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a18b4e1cee3d9d25d79cfbff9a139b158" class="m-doc-self" name="a18b4e1cee3d9d25d79cfbff9a139b158">setTriangleInterpolator</a>(</span><span class="m-doc-wrap"><a href="classTriangleInterpolator.html" class="m-doc">TriangleInterpolator</a>* inter) <span class="m-label m-flat m-warning">override</span></span>
            </dt>
            <dd>Sets an interpolator.</dd>
            <dt>
              <span class="m-doc-wrap-bumper">auto <a href="#a9a64d8cd62aec3596b389c0b9f234b60" class="m-doc-self" name="a9a64d8cd62aec3596b389c0b9f234b60">swapEdge</a>(</span><span class="m-doc-wrap">double x,
              double y) -&gt; bool <span class="m-label m-flat m-warning">override</span></span>
            </dt>
            <dd>Swaps the edge which is closest to the point with x and y coordinates (if this is possible) and forces recalculation of the concerned normals (if alreadyestimated is true)</dd>
          </dl>
        </section>
        <section id="pro-methods">
          <h2><a href="#pro-methods">Protected functions</a></h2>
          <dl class="m-doc">
            <dt>
              <span class="m-doc-wrap-bumper">void <a href="#a8cb6fa7c42ee1a794f025019c6b97d7f" class="m-doc-self" name="a8cb6fa7c42ee1a794f025019c6b97d7f">setState</a>(</span><span class="m-doc-wrap">int pointno,
              <a href="classNormVecDecorator.html#af5f5f0b4a0975d79af48e06ddbbe7337" class="m-doc">PointState</a> s)</span>
            </dt>
            <dd>Sets the state (BreakLine, Normal, EndPoint) of a point.</dd>
          </dl>
        </section>
        <section id="pro-attribs">
          <h2><a href="#pro-attribs">Protected variables</a></h2>
          <dl class="m-doc">
            <dt>
              bool <a href="#a2bc439f091b7693a3a21f7e456418f12" class="m-doc-self" name="a2bc439f091b7693a3a21f7e456418f12">alreadyestimated</a>
            </dt>
            <dd>Is true, if the normals already have been estimated.</dd>
            <dt>
              <a href="classTriangleInterpolator.html" class="m-doc">TriangleInterpolator</a>* <a href="#a6b4cb34d88bc478276a0af583f23df3f" class="m-doc-self" name="a6b4cb34d88bc478276a0af583f23df3f">mInterpolator</a>
            </dt>
            <dd>Association with an interpolator object.</dd>
            <dt>
              QVector&lt;<a href="classVector3D.html" class="m-doc">Vector3D</a>*&gt;* <a href="#a8cfbd28dfc9109fd5f1c073c85953a18" class="m-doc-self" name="a8cfbd28dfc9109fd5f1c073c85953a18">mNormVec</a>
            </dt>
            <dd>Vector that stores the normals for the points. If &#x27;<a href="classNormVecDecorator.html#adbb6b1fe2b6bab1a929337e359d609f2" class="m-doc">estimateFirstDerivatives()</a>&#x27; was called and there is a null pointer, this means, that the triangle point is on a breakline.</dd>
            <dt>
              QVector&lt;<a href="classNormVecDecorator.html#af5f5f0b4a0975d79af48e06ddbbe7337" class="m-doc">PointState</a>&gt;* <a href="#a2482a2b84ba07633bd13870d8168e9c8" class="m-doc-self" name="a2482a2b84ba07633bd13870d8168e9c8">mPointState</a>
            </dt>
            <dd>Vector who stores, it a point is not on a breakline, if it is a normal point of the breakline or if it is an endpoint of a breakline.</dd>
          </dl>
        </section>
        <section>
          <h2>Function documentation</h2>
          <section class="m-doc-details" id="af6c7c88358a1906dddc276a1eb81a152"><div>
            <h3>
              <span class="m-doc-wrap-bumper">int NormVecDecorator::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#af6c7c88358a1906dddc276a1eb81a152" class="m-doc-self">addPoint</a>(</span><span class="m-doc-wrap">const <a href="classQgsPoint.html" class="m-doc">QgsPoint</a>&amp; point) <span class="m-label m-warning">override</span></span></span>
            </h3>
            <p>Adds a <em>point</em> to the triangulation.</p>
<p>The point should have a z-value matching the value to interpolate.</p>
          </div></section>
          <section class="m-doc-details" id="a5a51d6b2d83fa689ee6dc8bbebfb6fb7"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool NormVecDecorator::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a5a51d6b2d83fa689ee6dc8bbebfb6fb7" class="m-doc-self">calcPoint</a>(</span><span class="m-doc-wrap">double x,
              double y,
              <a href="classQgsPoint.html" class="m-doc">QgsPoint</a>&amp; result) <span class="m-label m-warning">override</span></span></span>
            </h3>
            <p>Calculates x-, y and z-value of the point on the surface and assigns it to &#x27;result&#x27;.</p>
<p>Returns true in case of success and flase in case of failure</p>
          </div></section>
          <section class="m-doc-details" id="a530951628c6a30912667c556690782ed"><div>
            <h3>
              <span class="m-doc-wrap-bumper">bool NormVecDecorator::<wbr /></span><span class="m-doc-wrap"><span class="m-doc-wrap-bumper"><a href="#a530951628c6a30912667c556690782ed" class="m-doc-self">saveTriangulation</a>(</span><span class="m-doc-wrap"><a href="classQgsFeatureSink.html" class="m-doc">QgsFeatureSink</a>* sink,
              <a href="classQgsFeedback.html" class="m-doc">QgsFeedback</a>* feedback = nullptr) const <span class="m-label m-warning">override</span></span></span>
            </h3>
            <p>Saves the triangulation features to a feature <em>sink</em>.</p>
            <table class="m-table m-fullwidth m-flat">
              <tfoot>
                <tr>
                  <th style="width: 1%">Returns</th>
                  <td>true in case of success</td>
                </tr>
              </tfoot>
            </table>
<p>The sink must be setup to accept LineString features, with fields matching those returned by <a href="classTriangulation.html#a1a34ead0d4a8b74fd1dbea0362316ea4" class="m-doc">triangulationFields()</a>.</p><aside class="m-note m-default"><h4>See also</h4><p><a href="classTriangulation.html#a1a34ead0d4a8b74fd1dbea0362316ea4" class="m-doc">triangulationFields()</a></p></aside><aside class="m-note m-default"><h4>Since</h4><p>QGIS 3.0</p></aside>
          </div></section>
        </section>
      </div>
    </div>
  </div>
</article></main>
<div class="m-doc-search" id="search">
  <a href="#!" onclick="return hideSearch()"></a>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-m-8 m-push-m-2">
        <div class="m-doc-search-header m-text m-small">
          <div><span class="m-label m-default">Tab</span> / <span class="m-label m-default">T</span> to search, <span class="m-label m-default">Esc</span> to close</div>
          <div id="search-symbolcount">&hellip;</div>
        </div>
        <div class="m-doc-search-content">
          <form>
            <input type="search" name="q" id="search-input" placeholder="Loading &hellip;" disabled="disabled" autofocus="autofocus" autocomplete="off" spellcheck="false" />
          </form>
          <noscript class="m-text m-danger m-text-center">Unlike everything else in the docs, the search functionality <em>requires</em> JavaScript.</noscript>
          <div id="search-help" class="m-text m-dim m-text-center">
            <p class="m-noindent">Search for symbols, directories, files, pages or
            modules. You can omit any prefix from the symbol or file path; adding a
            <code>:</code> or <code>/</code> suffix lists all members of given symbol or
            directory.</p>
            <p class="m-noindent">Use <span class="m-label m-dim">&darr;</span>
            / <span class="m-label m-dim">&uarr;</span> to navigate through the list,
            <span class="m-label m-dim">Enter</span> to go.
            <span class="m-label m-dim">Tab</span> autocompletes common prefix, you can
            copy a link to the result using <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">L</span> while <span class="m-label m-dim">⌘</span>
            <span class="m-label m-dim">M</span> produces a Markdown link.</p>

          </div>
          <div id="search-notfound" class="m-text m-warning m-text-center">Sorry, nothing was found.</div>
          <ul id="search-results"></ul>
        </div>
      </div>
    </div>
  </div>
</div>
<script src="search.js"></script>
<script src="searchdata.js" async="async"></script>
<footer><nav>
  <div class="m-container">
    <div class="m-row">
      <div class="m-col-l-10 m-push-l-1">
        <p>QGIS API Documentation. Created by <a href="https://doxygen.org/">Doxygen</a> 1.8.13 and <a href="https://mcss.mosra.cz/">m.css</a>.</p>
      </div>
    </div>
  </div>
</nav></footer>
</body>
</html>
